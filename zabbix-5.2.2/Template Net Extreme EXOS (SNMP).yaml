zabbix_export:
  version: '5.2'
  date: '2021-06-04T11:22:34Z'
  groups:
    -
      name: 'Templates/Network devices'
  templates:
    -
      template: 'Template Net Extreme EXOS SNMPv2'
      name: 'Template Net Extreme EXOS SNMPv2'
      description: |
        Template Extreme EXOS version: 0.15
        MIBs used:
        EXTREME-SOFTWARE-MONITOR-MIB
        EXTREME-SYSTEM-MIB
        ENTITY-MIB
      groups:
        -
          name: 'Templates/Network devices'
      applications:
        -
          name: CPU
        -
          name: Fans
        -
          name: General
        -
          name: Inventory
        -
          name: Memory
        -
          name: 'Network interfaces'
        -
          name: 'Power supply'
        -
          name: Status
        -
          name: Temperature
      items:
        -
          name: 'ICMP ping'
          type: SIMPLE
          key: icmpping
          description: 'Retorno de disponibilidade do dispositivo por PING'
          applications:
            -
              name: Status
          valuemap:
            name: 'Ping State'
          triggers:
            -
              expression: '{max(#6)}=0'
              name: 'Unavailable by ICMP ping'
              priority: HIGH
        -
          name: 'ICMP loss'
          type: SIMPLE
          key: icmppingloss
          value_type: FLOAT
          units: '%'
          description: 'Porcentagem de perda de pacotes por PING'
          applications:
            -
              name: Status
          triggers:
            -
              expression: '{min(5m)}>{$ICMP_LOSS_WARN} and {min(5m)}<150'
              name: 'High ICMP ping loss'
              priority: WARNING
              dependencies:
                -
                  name: 'Unavailable by ICMP ping'
                  expression: '{Template Net Extreme EXOS SNMPv2:icmpping.max(#6)}=0'
        -
          name: 'ICMP response time'
          type: SIMPLE
          key: icmppingsec
          value_type: FLOAT
          units: s
          description: 'Tempo de resposta do dispositivo por PING'
          applications:
            -
              name: Status
          triggers:
            -
              expression: '{avg(5m)}>{$ICMP_RESPONSE_TIME_WARN}'
              name: 'High ICMP ping response time'
              priority: WARNING
              dependencies:
                -
                  name: 'High ICMP ping loss'
                  expression: '{Template Net Extreme EXOS SNMPv2:icmppingloss.min(5m)}>{$ICMP_LOSS_WARN} and {Template Net Extreme EXOS SNMPv2:icmppingloss.min(5m)}<150'
                -
                  name: 'Unavailable by ICMP ping'
                  expression: '{Template Net Extreme EXOS SNMPv2:icmpping.max(#6)}=0'
        -
          name: 'Device: Temperature status'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.1916.1.1.1.7.0
          key: 'sensor.temp.status[extremeOverTemperatureAlarm.0]'
          delay: 3m
          history: 2w
          trends: 0d
          description: |
            MIB: EXTREME-SYSTEM-MIB
            Temperature status of testpoint: Device
          applications:
            -
              name: Temperature
        -
          name: 'Device: Temperature'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.1916.1.1.1.8.0
          key: 'sensor.temp.value[extremeCurrentTemperature.0]'
          delay: 3m
          history: 30d
          value_type: FLOAT
          units: °C
          description: |
            MIB: EXTREME-SYSTEM-MIB
            Temperature readings of testpoint: Device
            Reference: https://gtacknowledge.extremenetworks.com/articles/Q_A/Does-EXOS-support-temperature-polling-via-SNMP-on-all-nodes-in-a-stack
          applications:
            -
              name: Temperature
          triggers:
            -
              expression: '{avg(5m)}>{$TEMP_WARN:""}'
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: '{max(5m)}<{$TEMP_WARN:""}-3'
              name: 'Device: Temperature is above warning threshold: >{$TEMP_WARN:""}'
              priority: WARNING
              description: |
                Last value: {ITEM.LASTVALUE1}.
                This trigger uses temperature sensor values as well as temperature sensor status if available
              dependencies:
                -
                  name: 'Device: Temperature is above critical threshold: >{$TEMP_CRIT:""}'
                  expression: |
                    {Template Net Extreme EXOS SNMPv2:sensor.temp.value[extremeCurrentTemperature.0].avg(5m)}>{$TEMP_CRIT:""}
                    or
                    {Template Net Extreme EXOS SNMPv2:sensor.temp.status[extremeOverTemperatureAlarm.0].last(0)}={$TEMP_CRIT_STATUS}
                  recovery_expression: '{Template Net Extreme EXOS SNMPv2:sensor.temp.value[extremeCurrentTemperature.0].max(5m)}<{$TEMP_CRIT:""}-3'
            -
              expression: '{avg(5m)}<{$TEMP_CRIT_LOW:""}'
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: '{min(5m)}>{$TEMP_CRIT_LOW:""}+3'
              name: 'Device: Temperature is too low: <{$TEMP_CRIT_LOW:""}'
              priority: AVERAGE
              description: 'Last value: {ITEM.LASTVALUE1}.'
        -
          name: 'Device contact details'
          type: SNMP_AGENT
          snmp_oid: sysContact.0
          key: system.contact
          delay: 1h
          trends: '0'
          value_type: CHAR
          description: 'Detalhes de contato do dispositivo'
          inventory_link: CONTACT
          applications:
            -
              name: General
        -
          name: 'CPU utilization'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.1916.1.32.1.2.0
          key: 'system.cpu.util[extremeCpuMonitorTotalUtilization.0]'
          delay: 3m
          history: 30d
          value_type: FLOAT
          units: '%'
          description: |
            MIB: EXTREME-SOFTWARE-MONITOR-MIB
            Total CPU utlization (percentage) as of last sampling.
          applications:
            -
              name: CPU
          triggers:
            -
              expression: '{avg(5m)}>{$CPU_UTIL_MAX}'
              name: 'High CPU utilization'
              priority: AVERAGE
              description: 'Last value: {ITEM.LASTVALUE1}.'
        -
          name: 'Device description'
          type: SNMP_AGENT
          snmp_oid: sysDescr.0
          key: system.descr
          delay: 1h
          trends: '0'
          value_type: CHAR
          description: 'Descrição do dispositivo'
          inventory_link: HARDWARE_FULL
          applications:
            -
              name: General
        -
          name: 'Firmware version'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.47.1.1.1.1.9.1
          key: system.hw.firmware
          delay: 1h
          history: 2w
          trends: '0'
          value_type: CHAR
          description: 'Versão do firmware'
          inventory_link: OS_FULL
          applications:
            -
              name: Inventory
          triggers:
            -
              expression: '{diff()}=1 and {strlen()}>0'
              recovery_mode: NONE
              name: 'Firmware has changed'
              priority: INFO
              description: |
                Last value: {ITEM.LASTVALUE1}.
                Firmware version has changed. Ack to close
              manual_close: 'YES'
        -
          name: 'Hardware model name'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.47.1.1.1.1.2.1
          key: system.hw.model
          delay: 1h
          history: 2w
          trends: '0'
          value_type: CHAR
          description: 'Nome do modelo de hardware'
          inventory_link: MODEL
          applications:
            -
              name: Inventory
        -
          name: 'Hardware serial number'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.47.1.1.1.1.11.1
          key: system.hw.serialnumber
          delay: 1h
          history: 2w
          trends: '0'
          value_type: CHAR
          description: 'Número de série do hardware'
          inventory_link: SERIALNO_A
          applications:
            -
              name: Inventory
          triggers:
            -
              expression: '{diff()}=1 and {strlen()}>0'
              recovery_mode: NONE
              name: 'Device has been replaced (new serial number received)'
              priority: INFO
              description: |
                Last value: {ITEM.LASTVALUE1}.
                Device serial number has changed. Ack to close
              manual_close: 'YES'
        -
          name: 'Hardware version(revision)'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.47.1.1.1.1.9.1
          key: system.hw.version
          delay: 1h
          history: 2w
          trends: '0'
          value_type: CHAR
          description: 'Versão do hardware'
          inventory_link: HW_ARCH
          applications:
            -
              name: Inventory
        -
          name: 'Device Location'
          type: SNMP_AGENT
          snmp_oid: sysLocation.0
          key: system.location
          delay: 1h
          trends: '0'
          value_type: CHAR
          description: 'Localização do dispositivo'
          inventory_link: LOCATION
          applications:
            -
              name: General
        -
          name: 'Device name'
          type: SNMP_AGENT
          snmp_oid: sysName.0
          key: system.name
          delay: 1h
          trends: '0'
          value_type: CHAR
          description: 'Nome do dispositivo'
          inventory_link: NAME
          applications:
            -
              name: General
        -
          name: 'Operating system'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.1916.1.1.1.13.0
          key: system.sw.os
          delay: 1h
          history: 2w
          trends: '0'
          value_type: CHAR
          description: |
            MIB: EXTREME-SYSTEM-MIB
            The software revision of the primary image stored in this device.
            This string will have a zero length if the revision is unknown, invalid or not present.
            This will also be reported in RMON2 probeSoftwareRev if this is the software image currently running in the device.
          inventory_link: OS
          applications:
            -
              name: Inventory
        -
          name: 'Device uptime'
          type: SNMP_AGENT
          snmp_oid: sysUpTime.0
          key: system.uptime
          units: uptime
          description: 'Tempo do sistema ativo'
          applications:
            -
              name: Status
          triggers:
            -
              expression: '{last()}<10m'
              name: '{HOST.HOST} has been restarted'
              priority: WARNING
              dependencies:
                -
                  name: 'No SNMP data collection'
                  expression: '{Template Net Extreme EXOS SNMPv2:zabbix[host,snmp,available].max({$SNMP_TIMEOUT})}=0'
        -
          name: 'SNMP availability'
          type: INTERNAL
          key: 'zabbix[host,snmp,available]'
          description: 'Retorno de disponibilidade do dispositivo por SNMP'
          applications:
            -
              name: Status
          valuemap:
            name: 'SMNP Available'
          triggers:
            -
              expression: '{max({$SNMP_TIMEOUT})}=0'
              name: 'No SNMP data collection'
              priority: WARNING
              dependencies:
                -
                  name: 'Unavailable by ICMP ping'
                  expression: '{Template Net Extreme EXOS SNMPv2:icmpping.max(#6)}=0'
      discovery_rules:
        -
          name: 'FAN Discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},1.3.6.1.4.1.1916.1.1.1.9.1.1]'
          key: fan.discovery
          delay: 1h
          item_prototypes:
            -
              name: 'Fan {#SNMPVALUE}: Fan speed'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.1916.1.1.1.9.1.4.{#SNMPINDEX}'
              key: 'sensor.fan.speed[extremeFanSpeed.{#SNMPINDEX}]'
              delay: 5m
              history: 30d
              units: rpm
              description: |
                MIB: EXTREME-SYSTEM-MIB
                The speed (RPM) of a cooling fan in the fantray {#SNMPVALUE}
              applications:
                -
                  name: Fans
            -
              name: 'Fan {#SNMPVALUE}: Fan status'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.1916.1.1.1.9.1.2.{#SNMPINDEX}'
              key: 'sensor.fan.status[extremeFanOperational.{#SNMPINDEX}]'
              delay: 3m
              history: 2w
              trends: '0'
              description: |
                MIB: EXTREME-SYSTEM-MIB
                Operational status of a cooling fan.
              applications:
                -
                  name: Fans
              valuemap:
                name: hwEntityFanState
              trigger_prototypes:
                -
                  expression: '{count(#1,{$FAN_CRIT_STATUS},eq)}=1'
                  name: 'Fan {#SNMPVALUE}: Fan is in critical state'
                  priority: AVERAGE
                  description: |
                    Last value: {ITEM.LASTVALUE1}.
                    Please check the fan unit
        -
          name: 'Memory Discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},1.3.6.1.4.1.1916.1.32.2.2.1.1]'
          key: memory.discovery
          delay: 1h
          item_prototypes:
            -
              name: '#{#SNMPVALUE}: Available memory'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.1916.1.32.2.2.1.3.{#SNMPINDEX}'
              key: 'vm.memory.free[extremeMemoryMonitorSystemFree.{#SNMPINDEX}]'
              delay: 3m
              history: 30d
              units: B
              description: |
                MIB: EXTREME-SOFTWARE-MONITOR-MIB
                Total amount of free memory in Kbytes in the system.
              applications:
                -
                  name: Memory
              preprocessing:
                -
                  type: MULTIPLIER
                  parameters:
                    - '1024'
            -
              name: '#{#SNMPVALUE}: Memory utilization'
              type: CALCULATED
              key: 'vm.memory.pused[{#SNMPVALUE}]'
              delay: 3m
              history: 30d
              value_type: FLOAT
              units: '%'
              params: '((last(vm.memory.total[extremeMemoryMonitorSystemTotal.{#SNMPINDEX}])-last(vm.memory.free[extremeMemoryMonitorSystemFree.{#SNMPINDEX}]))/last(vm.memory.total[extremeMemoryMonitorSystemTotal.{#SNMPINDEX}]))*100'
              description: 'Memory utilization in %'
              applications:
                -
                  name: Memory
              trigger_prototypes:
                -
                  expression: '{avg(5m)}>{$MEMORY_UTIL_MAX}'
                  name: '#{#SNMPVALUE}: High memory utilization'
                  priority: AVERAGE
                  description: 'Last value: {ITEM.LASTVALUE1}.'
            -
              name: '#{#SNMPVALUE}: Total memory'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.1916.1.32.2.2.1.2.{#SNMPINDEX}'
              key: 'vm.memory.total[extremeMemoryMonitorSystemTotal.{#SNMPINDEX}]'
              delay: 3m
              history: 30d
              units: B
              description: |
                MIB: EXTREME-SOFTWARE-MONITOR-MIB
                Total amount of DRAM in Kbytes in the system.
              applications:
                -
                  name: Memory
              preprocessing:
                -
                  type: MULTIPLIER
                  parameters:
                    - '1024'
          graph_prototypes:
            -
              name: '#{#SNMPVALUE}: Memory utilization'
              ymin_type_1: FIXED
              ymax_type_1: FIXED
              graph_items:
                -
                  drawtype: GRADIENT_LINE
                  color: 1A7C11
                  item:
                    host: 'Template Net Extreme EXOS SNMPv2'
                    key: 'vm.memory.pused[{#SNMPVALUE}]'
        -
          name: 'Network Interfaces Discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#IFOPERSTATUS},1.3.6.1.2.1.2.2.1.8,{#IFADMINSTATUS},1.3.6.1.2.1.2.2.1.7,{#IFALIAS},1.3.6.1.2.1.31.1.1.1.18,{#IFNAME},1.3.6.1.2.1.31.1.1.1.1,{#IFDESCR},1.3.6.1.2.1.2.2.1.2,{#IFTYPE},1.3.6.1.2.1.2.2.1.3]'
          key: net.if.discovery
          delay: 1h
          filter:
            conditions:
              -
                macro: '{#IFADMINSTATUS}'
                value: (1|3)
                formulaid: A
              -
                macro: '{#IFNAME}'
                value: '@Network interfaces for discovery'
                formulaid: B
              -
                macro: '{#IFOPERSTATUS}'
                value: (1|2|3|4|5|7)
                formulaid: C
          item_prototypes:
            -
              name: 'Interface {#IFNAME}({#IFALIAS}): Inbound packets discarded'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.2.2.1.13.{#SNMPINDEX}'
              key: 'net.if.in.discards[ifInDiscards.{#SNMPINDEX}]'
              delay: 5m
              description: 'Tráfego de entrada de pacotes descartados'
              applications:
                -
                  name: 'Network interfaces'
            -
              name: 'Interface {#IFNAME}({#IFALIAS}): Inbound packets with errors'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.2.2.1.14.{#SNMPINDEX}'
              key: 'net.if.in.errors[ifInErrors.{#SNMPINDEX}]'
              description: 'Tráfego de entrada de pacotes com erros'
              applications:
                -
                  name: 'Network interfaces'
            -
              name: 'Interface {#IFNAME}({#IFALIAS}): Bits received'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.31.1.1.1.6.{#SNMPINDEX}'
              key: 'net.if.in[ifHCInOctets.{#SNMPINDEX}]'
              delay: 3m
              units: bps
              description: 'Tráfego de entrada na interface'
              applications:
                -
                  name: 'Network interfaces'
              preprocessing:
                -
                  type: CHANGE_PER_SECOND
                  parameters:
                    - ''
                -
                  type: MULTIPLIER
                  parameters:
                    - '8'
            -
              name: 'Interface {#IFNAME}({#IFALIAS}): Outbound packets discarded'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.2.2.1.19.{#SNMPINDEX}'
              key: 'net.if.out.discards[ifOutDiscards.{#SNMPINDEX}]'
              delay: 5m
              description: 'Tráfego de saída de pacotes descartados'
              applications:
                -
                  name: 'Network interfaces'
            -
              name: 'Interface {#IFNAME}({#IFALIAS}): Outbound packets with errors'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.2.2.1.20.{#SNMPINDEX}'
              key: 'net.if.out.errors[ifOutErrors.{#SNMPINDEX}]'
              delay: 3m
              description: 'Tráfego de saída de pacotes com erros'
              applications:
                -
                  name: 'Network interfaces'
            -
              name: 'Interface {#IFNAME}({#IFALIAS}): Bits sent'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.31.1.1.1.10.{#SNMPINDEX}'
              key: 'net.if.out[ifHCOutOctets.{#SNMPINDEX}]'
              delay: 3m
              units: bps
              description: 'Tráfego de saída na interface'
              applications:
                -
                  name: 'Network interfaces'
              preprocessing:
                -
                  type: CHANGE_PER_SECOND
                  parameters:
                    - ''
                -
                  type: MULTIPLIER
                  parameters:
                    - '8'
            -
              name: 'Interface {#IFNAME}({#IFALIAS}): Speed'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.31.1.1.1.15.{#SNMPINDEX}'
              key: 'net.if.speed[ifHighSpeed.{#SNMPINDEX}]'
              delay: 5m
              units: bps
              description: 'Velocidade da interface'
              applications:
                -
                  name: 'Network interfaces'
              preprocessing:
                -
                  type: MULTIPLIER
                  parameters:
                    - '1000000'
            -
              name: 'Interface {#IFNAME}({#IFALIAS}): Operational status'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.2.2.1.8.{#SNMPINDEX}'
              key: 'net.if.status[ifOperStatus.{#SNMPINDEX}]'
              description: 'Estado operacional'
              applications:
                -
                  name: 'Network interfaces'
              valuemap:
                name: ifOperStatus
              trigger_prototypes:
                -
                  expression: '{$IFCONTROL:"{#IFNAME}"}=1 and ({last()}=2 and {diff()}=1)'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: '{last()}<>2'
                  name: 'Interface {#IFNAME}({#IFALIAS}): Link down'
                  priority: AVERAGE
            -
              name: 'Interface {#IFNAME}({#IFALIAS}): Interface type'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.2.2.1.3.{#SNMPINDEX}'
              key: 'net.if.type[ifType.{#SNMPINDEX}]'
              delay: 1h
              description: 'Tipo da interface'
              applications:
                -
                  name: 'Network interfaces'
              valuemap:
                name: 'IF-MIB::ifType'
          trigger_prototypes:
            -
              expression: '({Template Net Extreme EXOS SNMPv2:net.if.in[ifHCInOctets.{#SNMPINDEX}].avg(15m)}>({$IF_UTIL_MAX:"{#IFNAME}"}/100)*{Template Net Extreme EXOS SNMPv2:net.if.speed[ifHighSpeed.{#SNMPINDEX}].last()} or {Template Net Extreme EXOS SNMPv2:net.if.out[ifHCOutOctets.{#SNMPINDEX}].avg(15m)}>({$IF_UTIL_MAX:"{#IFNAME}"}/100)*{Template Net Extreme EXOS SNMPv2:net.if.speed[ifHighSpeed.{#SNMPINDEX}].last()}) and {Template Net Extreme EXOS SNMPv2:net.if.speed[ifHighSpeed.{#SNMPINDEX}].last()}>0'
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: '{Template Net Extreme EXOS SNMPv2:net.if.in[ifHCInOctets.{#SNMPINDEX}].avg(15m)}<(({$IF_UTIL_MAX:"{#IFNAME}"}-3)/100)*{Template Net Extreme EXOS SNMPv2:net.if.speed[ifHighSpeed.{#SNMPINDEX}].last()} and {Template Net Extreme EXOS SNMPv2:net.if.out[ifHCOutOctets.{#SNMPINDEX}].avg(15m)}<(({$IF_UTIL_MAX:"{#IFNAME}"}-3)/100)*{Template Net Extreme EXOS SNMPv2:net.if.speed[ifHighSpeed.{#SNMPINDEX}].last()}'
              name: 'Interface {#IFNAME}({#IFALIAS}): High bandwidth usage > {$IF_UTIL_MAX:"{#IFNAME}"}%'
              priority: WARNING
              dependencies:
                -
                  name: 'Interface {#IFNAME}({#IFALIAS}): Link down'
                  expression: '{$IFCONTROL:"{#IFNAME}"}=1 and ({Template Net Extreme EXOS SNMPv2:net.if.status[ifOperStatus.{#SNMPINDEX}].last()}=2 and {Template Net Extreme EXOS SNMPv2:net.if.status[ifOperStatus.{#SNMPINDEX}].diff()}=1)'
                  recovery_expression: '{Template Net Extreme EXOS SNMPv2:net.if.status[ifOperStatus.{#SNMPINDEX}].last()}<>2'
            -
              expression: '{Template Net Extreme EXOS SNMPv2:net.if.in.errors[ifInErrors.{#SNMPINDEX}].avg(5m)}>{$IF_ERRORS_WARN:"{#IFNAME}"} or {Template Net Extreme EXOS SNMPv2:net.if.out.errors[ifOutErrors.{#SNMPINDEX}].avg(5m)}>{$IF_ERRORS_WARN:"{#IFNAME}"}'
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: '{Template Net Extreme EXOS SNMPv2:net.if.in.errors[ifInErrors.{#SNMPINDEX}].avg(5m)}<{$IF_ERRORS_WARN:"{#IFNAME}"}*0.8 and {Template Net Extreme EXOS SNMPv2:net.if.out.errors[ifOutErrors.{#SNMPINDEX}].avg(5m)}<{$IF_ERRORS_WARN:"{#IFNAME}"}*0.8'
              name: 'Interface {#IFNAME}({#IFALIAS}): High error rate'
              priority: WARNING
              dependencies:
                -
                  name: 'Interface {#IFNAME}({#IFALIAS}): Link down'
                  expression: '{$IFCONTROL:"{#IFNAME}"}=1 and ({Template Net Extreme EXOS SNMPv2:net.if.status[ifOperStatus.{#SNMPINDEX}].last()}=2 and {Template Net Extreme EXOS SNMPv2:net.if.status[ifOperStatus.{#SNMPINDEX}].diff()}=1)'
                  recovery_expression: '{Template Net Extreme EXOS SNMPv2:net.if.status[ifOperStatus.{#SNMPINDEX}].last()}<>2'
          graph_prototypes:
            -
              name: 'Interface {#IFNAME}({#IFALIAS}): Network traffic'
              graph_items:
                -
                  sortorder: '1'
                  color: 199C0D
                  item:
                    host: 'Template Net Extreme EXOS SNMPv2'
                    key: 'net.if.in[ifHCInOctets.{#SNMPINDEX}]'
                -
                  sortorder: '2'
                  color: F63100
                  item:
                    host: 'Template Net Extreme EXOS SNMPv2'
                    key: 'net.if.out[ifHCOutOctets.{#SNMPINDEX}]'
                -
                  sortorder: '3'
                  color: 2774A4
                  item:
                    host: 'Template Net Extreme EXOS SNMPv2'
                    key: 'net.if.in.discards[ifInDiscards.{#SNMPINDEX}]'
                -
                  sortorder: '4'
                  color: F7941D
                  item:
                    host: 'Template Net Extreme EXOS SNMPv2'
                    key: 'net.if.in.errors[ifInErrors.{#SNMPINDEX}]'
                -
                  sortorder: '5'
                  color: FC6EA3
                  item:
                    host: 'Template Net Extreme EXOS SNMPv2'
                    key: 'net.if.out.discards[ifOutDiscards.{#SNMPINDEX}]'
                -
                  sortorder: '6'
                  color: 6C59DC
                  item:
                    host: 'Template Net Extreme EXOS SNMPv2'
                    key: 'net.if.out.errors[ifOutErrors.{#SNMPINDEX}]'
        -
          name: 'EtherLike-MIB Discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},1.3.6.1.2.1.10.7.2.1.19,{#IFOPERSTATUS},1.3.6.1.2.1.2.2.1.8,{#IFALIAS},1.3.6.1.2.1.31.1.1.1.18,{#IFNAME},1.3.6.1.2.1.31.1.1.1.1,{#IFDESCR},1.3.6.1.2.1.2.2.1.2]'
          key: net.if.duplex.discovery
          delay: 1h
          filter:
            conditions:
              -
                macro: '{#IFOPERSTATUS}'
                value: '1'
                formulaid: A
              -
                macro: '{#SNMPVALUE}'
                value: (2|3)
                formulaid: B
          item_prototypes:
            -
              name: 'Interface {#IFNAME}({#IFALIAS}): Duplex status'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.10.7.2.1.19.{#SNMPINDEX}'
              key: 'net.if.duplex[dot3StatsDuplexStatus.{#SNMPINDEX}]'
              delay: 5m
              applications:
                -
                  name: 'Network interfaces'
              valuemap:
                name: Dot3StatsDuplexStatus
              trigger_prototypes:
                -
                  expression: '{last()}=2'
                  name: 'Interface {#IFNAME}({#IFALIAS}): In half-duplex mode'
                  priority: WARNING
        -
          name: 'PSU Discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},1.3.6.1.4.1.1916.1.1.1.27.1.1]'
          key: psu.discovery
          delay: 1h
          description: 'Table of status of all power supplies in the system.'
          item_prototypes:
            -
              name: 'PSU {#SNMPVALUE}: Power supply status'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.1916.1.1.1.27.1.2.{#SNMPINDEX}'
              key: 'sensor.psu.status[extremePowerSupplyStatus.{#SNMPINDEX}]'
              delay: 3m
              history: 2w
              trends: '0'
              description: |
                MIB: EXTREME-SYSTEM-MIB
                Status of the power supply {#SNMPVALUE}
              applications:
                -
                  name: 'Power supply'
              valuemap:
                name: extremePowerSupplyStatus
              trigger_prototypes:
                -
                  expression: '{count(#1,{$PSU_CRIT_STATUS},eq)}=1'
                  name: 'PSU {#SNMPVALUE}: Power supply is in critical state'
                  priority: AVERAGE
                  description: |
                    Last value: {ITEM.LASTVALUE1}.
                    Please check the power supply unit for errors
      macros:
        -
          macro: '{$CPU_UTIL_MAX}'
          value: '90'
        -
          macro: '{$FAN_CRIT_STATUS}'
          value: '2'
        -
          macro: '{$MEMORY_UTIL_MAX}'
          value: '90'
        -
          macro: '{$PSU_CRIT_STATUS}'
          value: '3'
        -
          macro: '{$TEMP_CRIT}'
          value: '65'
        -
          macro: '{$TEMP_CRIT_LOW}'
          value: '5'
        -
          macro: '{$TEMP_CRIT_STATUS}'
          value: '1'
        -
          macro: '{$TEMP_WARN}'
          value: '55'
  triggers:
    -
      expression: |
        {Template Net Extreme EXOS SNMPv2:sensor.temp.value[extremeCurrentTemperature.0].avg(5m)}>{$TEMP_CRIT:""}
        or
        {Template Net Extreme EXOS SNMPv2:sensor.temp.status[extremeOverTemperatureAlarm.0].last(0)}={$TEMP_CRIT_STATUS}
      recovery_mode: RECOVERY_EXPRESSION
      recovery_expression: '{Template Net Extreme EXOS SNMPv2:sensor.temp.value[extremeCurrentTemperature.0].max(5m)}<{$TEMP_CRIT:""}-3'
      name: 'Device: Temperature is above critical threshold: >{$TEMP_CRIT:""}'
      priority: HIGH
      description: |
        Last value: {ITEM.LASTVALUE1}.
        This trigger uses temperature sensor values as well as temperature sensor status if available
  graphs:
    -
      name: 'CPU utilization'
      graph_items:
        -
          sortorder: '1'
          color: 199C0D
          item:
            host: 'Template Net Extreme EXOS SNMPv2'
            key: 'system.cpu.util[extremeCpuMonitorTotalUtilization.0]'
  value_maps:
    -
      name: Dot3StatsDuplexStatus
      mappings:
        -
          value: '1'
          newvalue: Unknown
        -
          value: '2'
          newvalue: halfDuplex
        -
          value: '3'
          newvalue: fullDuplex
    -
      name: extremePowerSupplyStatus
      mappings:
        -
          value: '1'
          newvalue: notPresent
        -
          value: '2'
          newvalue: presentOK
        -
          value: '3'
          newvalue: presentNotOK
        -
          value: '4'
          newvalue: presentPowerOff
    -
      name: hwEntityFanState
      mappings:
        -
          value: '1'
          newvalue: normal
        -
          value: '2'
          newvalue: abnormal
    -
      name: 'IF-MIB::ifType'
      mappings:
        -
          value: '1'
          newvalue: other
        -
          value: '2'
          newvalue: regular1822
        -
          value: '3'
          newvalue: hdh1822
        -
          value: '4'
          newvalue: ddnX25
        -
          value: '5'
          newvalue: rfc877x25
        -
          value: '6'
          newvalue: ethernetCsmacd
        -
          value: '7'
          newvalue: iso88023Csmacd
        -
          value: '8'
          newvalue: iso88024TokenBus
        -
          value: '9'
          newvalue: iso88025TokenRing
        -
          value: '10'
          newvalue: iso88026Man
        -
          value: '11'
          newvalue: starLan
        -
          value: '12'
          newvalue: proteon10Mbit
        -
          value: '13'
          newvalue: proteon80Mbit
        -
          value: '14'
          newvalue: hyperchannel
        -
          value: '15'
          newvalue: fddi
        -
          value: '16'
          newvalue: lapb
        -
          value: '17'
          newvalue: sdlc
        -
          value: '18'
          newvalue: ds1
        -
          value: '19'
          newvalue: e1
        -
          value: '20'
          newvalue: basicISDN
        -
          value: '21'
          newvalue: primaryISDN
        -
          value: '22'
          newvalue: propPointToPointSerial
        -
          value: '23'
          newvalue: ppp
        -
          value: '24'
          newvalue: softwareLoopback
        -
          value: '25'
          newvalue: eon
        -
          value: '26'
          newvalue: ethernet3Mbit
        -
          value: '27'
          newvalue: nsip
        -
          value: '28'
          newvalue: slip
        -
          value: '29'
          newvalue: ultra
        -
          value: '30'
          newvalue: ds3
        -
          value: '31'
          newvalue: sip
        -
          value: '32'
          newvalue: frameRelay
        -
          value: '33'
          newvalue: rs232
        -
          value: '34'
          newvalue: para
        -
          value: '35'
          newvalue: arcnet
        -
          value: '36'
          newvalue: arcnetPlus
        -
          value: '37'
          newvalue: atm
        -
          value: '38'
          newvalue: miox25
        -
          value: '39'
          newvalue: sonet
        -
          value: '40'
          newvalue: x25ple
        -
          value: '41'
          newvalue: iso88022llc
        -
          value: '42'
          newvalue: localTalk
        -
          value: '43'
          newvalue: smdsDxi
        -
          value: '44'
          newvalue: frameRelayService
        -
          value: '45'
          newvalue: v35
        -
          value: '46'
          newvalue: hssi
        -
          value: '47'
          newvalue: hippi
        -
          value: '48'
          newvalue: modem
        -
          value: '49'
          newvalue: aal5
        -
          value: '50'
          newvalue: sonetPath
        -
          value: '51'
          newvalue: sonetVT
        -
          value: '52'
          newvalue: smdsIcip
        -
          value: '53'
          newvalue: propVirtual
        -
          value: '54'
          newvalue: propMultiplexor
        -
          value: '55'
          newvalue: ieee80212
        -
          value: '56'
          newvalue: fibreChannel
        -
          value: '57'
          newvalue: hippiInterface
        -
          value: '58'
          newvalue: frameRelayInterconnect
        -
          value: '59'
          newvalue: aflane8023
        -
          value: '60'
          newvalue: aflane8025
        -
          value: '61'
          newvalue: cctEmul
        -
          value: '62'
          newvalue: fastEther
        -
          value: '63'
          newvalue: isdn
        -
          value: '64'
          newvalue: v11
        -
          value: '65'
          newvalue: v36
        -
          value: '66'
          newvalue: g703at64k
        -
          value: '67'
          newvalue: g703at2mb
        -
          value: '68'
          newvalue: qllc
        -
          value: '69'
          newvalue: fastEtherFX
        -
          value: '70'
          newvalue: channel
        -
          value: '71'
          newvalue: ieee80211
        -
          value: '72'
          newvalue: ibm370parChan
        -
          value: '73'
          newvalue: escon
        -
          value: '74'
          newvalue: dlsw
        -
          value: '75'
          newvalue: isdns
        -
          value: '76'
          newvalue: isdnu
        -
          value: '77'
          newvalue: lapd
        -
          value: '78'
          newvalue: ipSwitch
        -
          value: '79'
          newvalue: rsrb
        -
          value: '80'
          newvalue: atmLogical
        -
          value: '81'
          newvalue: ds0
        -
          value: '82'
          newvalue: ds0Bundle
        -
          value: '83'
          newvalue: bsc
        -
          value: '84'
          newvalue: async
        -
          value: '85'
          newvalue: cnr
        -
          value: '86'
          newvalue: iso88025Dtr
        -
          value: '87'
          newvalue: eplrs
        -
          value: '88'
          newvalue: arap
        -
          value: '89'
          newvalue: propCnls
        -
          value: '90'
          newvalue: hostPad
        -
          value: '91'
          newvalue: termPad
        -
          value: '92'
          newvalue: frameRelayMPI
        -
          value: '93'
          newvalue: x213
        -
          value: '94'
          newvalue: adsl
        -
          value: '95'
          newvalue: radsl
        -
          value: '96'
          newvalue: sdsl
        -
          value: '97'
          newvalue: vdsl
        -
          value: '98'
          newvalue: iso88025CRFPInt
        -
          value: '99'
          newvalue: myrinet
        -
          value: '100'
          newvalue: voiceEM
        -
          value: '101'
          newvalue: voiceFXO
        -
          value: '102'
          newvalue: voiceFXS
        -
          value: '103'
          newvalue: voiceEncap
        -
          value: '104'
          newvalue: voiceOverIp
        -
          value: '105'
          newvalue: atmDxi
        -
          value: '106'
          newvalue: atmFuni
        -
          value: '107'
          newvalue: atmIma
        -
          value: '108'
          newvalue: pppMultilinkBundle
        -
          value: '109'
          newvalue: ipOverCdlc
        -
          value: '110'
          newvalue: ipOverClaw
        -
          value: '111'
          newvalue: stackToStack
        -
          value: '112'
          newvalue: virtualIpAddress
        -
          value: '113'
          newvalue: mpc
        -
          value: '114'
          newvalue: ipOverAtm
        -
          value: '115'
          newvalue: iso88025Fiber
        -
          value: '116'
          newvalue: tdlc
        -
          value: '117'
          newvalue: gigabitEthernet
        -
          value: '118'
          newvalue: hdlc
        -
          value: '119'
          newvalue: lapf
        -
          value: '120'
          newvalue: v37
        -
          value: '121'
          newvalue: x25mlp
        -
          value: '122'
          newvalue: x25huntGroup
        -
          value: '123'
          newvalue: trasnpHdlc
        -
          value: '124'
          newvalue: interleave
        -
          value: '125'
          newvalue: fast
        -
          value: '126'
          newvalue: ip
        -
          value: '127'
          newvalue: docsCableMaclayer
        -
          value: '128'
          newvalue: docsCableDownstream
        -
          value: '129'
          newvalue: docsCableUpstream
        -
          value: '130'
          newvalue: a12MppSwitch
        -
          value: '131'
          newvalue: tunnel
        -
          value: '132'
          newvalue: coffee
        -
          value: '133'
          newvalue: ces
        -
          value: '134'
          newvalue: atmSubInterface
        -
          value: '135'
          newvalue: l2vlan
        -
          value: '136'
          newvalue: l3ipvlan
        -
          value: '137'
          newvalue: l3ipxvlan
        -
          value: '138'
          newvalue: digitalPowerline
        -
          value: '139'
          newvalue: mediaMailOverIp
        -
          value: '140'
          newvalue: dtm
        -
          value: '141'
          newvalue: dcn
        -
          value: '142'
          newvalue: ipForward
        -
          value: '143'
          newvalue: msdsl
        -
          value: '144'
          newvalue: ieee1394
        -
          value: '145'
          newvalue: if-gsn
        -
          value: '146'
          newvalue: dvbRccMacLayer
        -
          value: '147'
          newvalue: dvbRccDownstream
        -
          value: '148'
          newvalue: dvbRccUpstream
        -
          value: '149'
          newvalue: atmVirtual
        -
          value: '150'
          newvalue: mplsTunnel
        -
          value: '151'
          newvalue: srp
        -
          value: '152'
          newvalue: voiceOverAtm
        -
          value: '153'
          newvalue: voiceOverFrameRelay
        -
          value: '154'
          newvalue: idsl
        -
          value: '155'
          newvalue: compositeLink
        -
          value: '156'
          newvalue: ss7SigLink
        -
          value: '157'
          newvalue: propWirelessP2P
        -
          value: '158'
          newvalue: frForward
        -
          value: '159'
          newvalue: rfc1483
        -
          value: '160'
          newvalue: usb
        -
          value: '161'
          newvalue: ieee8023adLag
        -
          value: '162'
          newvalue: bgppolicyaccounting
        -
          value: '163'
          newvalue: frf16MfrBundle
        -
          value: '164'
          newvalue: h323Gatekeeper
        -
          value: '165'
          newvalue: h323Proxy
        -
          value: '166'
          newvalue: mpls
        -
          value: '167'
          newvalue: mfSigLink
        -
          value: '168'
          newvalue: hdsl2
        -
          value: '169'
          newvalue: shdsl
        -
          value: '170'
          newvalue: ds1FDL
        -
          value: '171'
          newvalue: pos
        -
          value: '172'
          newvalue: dvbAsiIn
        -
          value: '173'
          newvalue: dvbAsiOut
        -
          value: '174'
          newvalue: plc
        -
          value: '175'
          newvalue: nfas
        -
          value: '176'
          newvalue: tr008
        -
          value: '177'
          newvalue: gr303RDT
        -
          value: '178'
          newvalue: gr303IDT
        -
          value: '179'
          newvalue: isup
        -
          value: '180'
          newvalue: propDocsWirelessMaclayer
        -
          value: '181'
          newvalue: propDocsWirelessDownstream
        -
          value: '182'
          newvalue: propDocsWirelessUpstream
        -
          value: '183'
          newvalue: hiperlan2
        -
          value: '184'
          newvalue: propBWAp2Mp
        -
          value: '185'
          newvalue: sonetOverheadChannel
        -
          value: '186'
          newvalue: digitalWrapperOverheadChannel
        -
          value: '187'
          newvalue: aal2
        -
          value: '188'
          newvalue: radioMAC
        -
          value: '189'
          newvalue: atmRadio
        -
          value: '190'
          newvalue: imt
        -
          value: '191'
          newvalue: mvl
        -
          value: '192'
          newvalue: reachDSL
        -
          value: '193'
          newvalue: frDlciEndPt
        -
          value: '194'
          newvalue: atmVciEndPt
        -
          value: '195'
          newvalue: opticalChannel
        -
          value: '196'
          newvalue: opticalTransport
        -
          value: '197'
          newvalue: propAtm
        -
          value: '198'
          newvalue: voiceOverCable
        -
          value: '199'
          newvalue: infiniband
        -
          value: '200'
          newvalue: teLink
        -
          value: '201'
          newvalue: q2931
        -
          value: '202'
          newvalue: virtualTg
        -
          value: '203'
          newvalue: sipTg
        -
          value: '204'
          newvalue: sipSig
        -
          value: '205'
          newvalue: docsCableUpstreamChannel
        -
          value: '206'
          newvalue: econet
        -
          value: '207'
          newvalue: pon155
        -
          value: '208'
          newvalue: pon622
        -
          value: '209'
          newvalue: bridge
        -
          value: '210'
          newvalue: linegroup
        -
          value: '211'
          newvalue: voiceEMFGD
        -
          value: '212'
          newvalue: voiceFGDEANA
        -
          value: '213'
          newvalue: voiceDID
        -
          value: '214'
          newvalue: mpegTransport
        -
          value: '215'
          newvalue: sixToFour
        -
          value: '216'
          newvalue: gtp
        -
          value: '217'
          newvalue: pdnEtherLoop1
        -
          value: '218'
          newvalue: pdnEtherLoop2
        -
          value: '219'
          newvalue: opticalChannelGroup
        -
          value: '220'
          newvalue: homepna
        -
          value: '221'
          newvalue: gfp
        -
          value: '222'
          newvalue: ciscoISLvlan
        -
          value: '223'
          newvalue: actelisMetaLOOP
        -
          value: '224'
          newvalue: fcipLink
        -
          value: '225'
          newvalue: rpr
        -
          value: '226'
          newvalue: qam
        -
          value: '227'
          newvalue: lmp
        -
          value: '228'
          newvalue: cblVectaStar
        -
          value: '229'
          newvalue: docsCableMCmtsDownstream
        -
          value: '230'
          newvalue: adsl2
        -
          value: '231'
          newvalue: macSecControlledIF
        -
          value: '232'
          newvalue: macSecUncontrolledIF
        -
          value: '233'
          newvalue: aviciOpticalEther
        -
          value: '234'
          newvalue: atmbond
        -
          value: '235'
          newvalue: voiceFGDOS
        -
          value: '236'
          newvalue: mocaVersion1
        -
          value: '237'
          newvalue: ieee80216WMAN
        -
          value: '238'
          newvalue: adsl2plus
        -
          value: '239'
          newvalue: dvbRcsMacLayer
        -
          value: '240'
          newvalue: dvbTdm
        -
          value: '241'
          newvalue: dvbRcsTdma
        -
          value: '242'
          newvalue: x86Laps
        -
          value: '243'
          newvalue: wwanPP
        -
          value: '244'
          newvalue: wwanPP2
        -
          value: '245'
          newvalue: voiceEBS
        -
          value: '246'
          newvalue: ifPwType
        -
          value: '247'
          newvalue: ilan
        -
          value: '248'
          newvalue: pip
        -
          value: '249'
          newvalue: aluELP
        -
          value: '250'
          newvalue: gpon
        -
          value: '251'
          newvalue: vdsl2
        -
          value: '252'
          newvalue: capwapDot11Profile
        -
          value: '253'
          newvalue: capwapDot11Bss
        -
          value: '254'
          newvalue: capwapWtpVirtualRadio
        -
          value: '255'
          newvalue: bits
        -
          value: '256'
          newvalue: docsCableUpstreamRfPort
        -
          value: '257'
          newvalue: cableDownstreamRfPort
        -
          value: '258'
          newvalue: vmwareVirtualNic
        -
          value: '259'
          newvalue: ieee802154
        -
          value: '260'
          newvalue: otnOdu
        -
          value: '261'
          newvalue: otnOtu
        -
          value: '262'
          newvalue: ifVfiType
        -
          value: '263'
          newvalue: g9981
        -
          value: '264'
          newvalue: g9982
        -
          value: '265'
          newvalue: g9983
        -
          value: '266'
          newvalue: aluEpon
        -
          value: '267'
          newvalue: aluEponOnu
        -
          value: '268'
          newvalue: aluEponPhysicalUni
        -
          value: '269'
          newvalue: aluEponLogicalLink
        -
          value: '270'
          newvalue: aluGponOnu
        -
          value: '271'
          newvalue: aluGponPhysicalUni
        -
          value: '272'
          newvalue: vmwareNicTeam
        -
          value: '277'
          newvalue: docsOfdmDownstream
        -
          value: '278'
          newvalue: docsOfdmaUpstream
        -
          value: '279'
          newvalue: gfast
        -
          value: '280'
          newvalue: sdci
        -
          value: '281'
          newvalue: xboxWireless
        -
          value: '282'
          newvalue: fastdsl
        -
          value: '283'
          newvalue: docsCableScte55d1FwdOob
        -
          value: '284'
          newvalue: docsCableScte55d1RetOob
        -
          value: '285'
          newvalue: docsCableScte55d2DsOob
        -
          value: '286'
          newvalue: docsCableScte55d2UsOob
        -
          value: '287'
          newvalue: docsCableNdf
        -
          value: '288'
          newvalue: docsCableNdr
        -
          value: '289'
          newvalue: ptm
        -
          value: '290'
          newvalue: ghn
    -
      name: ifOperStatus
      mappings:
        -
          value: '1'
          newvalue: Up
        -
          value: '2'
          newvalue: Down
        -
          value: '3'
          newvalue: Testing
        -
          value: '4'
          newvalue: Unknown
        -
          value: '5'
          newvalue: Domant
        -
          value: '6'
          newvalue: NotPresent
        -
          value: '7'
          newvalue: LowerlayerDown
    -
      name: 'Ping State'
      mappings:
        -
          value: '0'
          newvalue: Down
        -
          value: '1'
          newvalue: Up
    -
      name: 'SMNP Available'
      mappings:
        -
          value: '0'
          newvalue: 'Not Available'
        -
          value: '1'
          newvalue: Available
        -
          value: '2'
          newvalue: Unknown
