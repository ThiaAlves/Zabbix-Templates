zabbix_export:
  version: '5.4'
  date: '2021-05-28T01:03:01Z'
  groups:
    -
      uuid: 57b7ae836ca64446ba2c296389c009b7
      name: Templates/Modules
  templates:
    -
      uuid: 3eadb8a2ad4a479cb59bfa6402deee3f
      template: 'Cisco CISCO-PROCESS-MIB IOS versions 12.0_3_T-12.2_3.5 SNMP'
      name: 'Cisco CISCO-PROCESS-MIB IOS versions 12.0_3_T-12.2_3.5 SNMP'
      description: |
        Template Module Cisco CISCO-PROCESS-MIB IOS versions 12.0_3_T-12.2_3.5
        
        MIBs used:
        CISCO-PROCESS-MIB
        
        Template tooling version used: 0.38
      groups:
        -
          name: Templates/Modules
      discovery_rules:
        -
          uuid: 372b5656330f41d18ccf99ca89fa8504
          name: 'CPU Discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},1.3.6.1.4.1.9.9.109.1.1.1.1.5]'
          key: cpu.discovery
          delay: 1h
          description: |
            If your IOS device has several CPUs, you must use CISCO-PROCESS-MIB and its object cpmCPUTotal5minRev from the table called cpmCPUTotalTable ,
            indexed with cpmCPUTotalIndex .
            This table allows CISCO-PROCESS-MIB to keep CPU statistics for different physical entities in the router,
            like different CPU chips, group of CPUs, or CPUs in different modules/cards.
            In case of a single CPU, cpmCPUTotalTable has only one entry.
          item_prototypes:
            -
              uuid: b7a375f679024cb990ae97933e5f77d6
              name: '{#SNMPVALUE}: CPU utilization'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.9.9.109.1.1.1.1.5.{#SNMPINDEX}'
              key: 'system.cpu.util[cpmCPUTotal5min.{#SNMPINDEX}]'
              delay: 5m
              history: 7d
              value_type: FLOAT
              units: '%'
              description: |
                MIB: CISCO-PROCESS-MIB
                The overall CPU busy percentage in the last 5 minute
                period. This object deprecates the avgBusy5 object from
                the OLD-CISCO-SYSTEM-MIB. This object is deprecated
                by cpmCPUTotal5minRev which has the changed range
                of value (0..100)
                Reference: http://www.cisco.com/c/en/us/support/docs/ip/simple-network-management-protocol-snmp/15215-collect-cpu-util-snmp.html
              tags:
                -
                  tag: Application
                  value: CPU
              trigger_prototypes:
                -
                  uuid: be863abc1e3440a9bd35c4db77f83961
                  expression: 'min(/Cisco CISCO-PROCESS-MIB IOS versions 12.0_3_T-12.2_3.5 SNMP/system.cpu.util[cpmCPUTotal5min.{#SNMPINDEX}],5m)>{$CPU.UTIL.CRIT}'
                  name: '{#SNMPVALUE}: High CPU utilization (over {$CPU.UTIL.CRIT}% for 5m)'
                  opdata: 'Current utilization: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  description: |
                    CPU utilization is too high. The system might be slow to respond.
                    Last value: {ITEM.LASTVALUE1}.
          graph_prototypes:
            -
              uuid: 8e045ff24e564afc9a55d4bd08529d22
              name: '{#SNMPVALUE}: CPU utilization'
              ymin_type_1: FIXED
              ymax_type_1: FIXED
              graph_items:
                -
                  drawtype: GRADIENT_LINE
                  color: 1A7C11
                  item:
                    host: 'Cisco CISCO-PROCESS-MIB IOS versions 12.0_3_T-12.2_3.5 SNMP'
                    key: 'system.cpu.util[cpmCPUTotal5min.{#SNMPINDEX}]'
      macros:
        -
          macro: '{$CPU.UTIL.CRIT}'
          value: '90'
