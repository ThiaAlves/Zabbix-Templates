zabbix_export:
  version: '5.4'
  date: '2021-05-28T01:09:39Z'
  groups:
    -
      uuid: e960332b3f6c46a1956486d4f3f99fce
      name: 'Templates/Server hardware'
  templates:
    -
      uuid: cb66d34564e44b3893442fc74cf6e951
      template: 'Cisco UCS SNMP'
      name: 'Cisco UCS SNMP'
      description: |
        Template Server Cisco UCS
        
        MIBs used:
        CISCO-UNIFIED-COMPUTING-COMPUTE-MIB
        CISCO-UNIFIED-COMPUTING-PROCESSOR-MIB
        CISCO-UNIFIED-COMPUTING-EQUIPMENT-MIB
        CISCO-UNIFIED-COMPUTING-STORAGE-MIB
        
        Template tooling version used: 0.38
      templates:
        -
          name: 'Generic SNMP'
      groups:
        -
          name: 'Templates/Server hardware'
      discovery_rules:
        -
          uuid: 5c6518a1df0b45c09f3a2f186c3d4e3b
          name: 'Array Controller Cache Discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#DISKARRAY_CACHE_LOCATION},1.3.6.1.4.1.9.9.719.1.45.11.1.2]'
          key: array.cache.discovery
          delay: 1h
          description: 'Scanning table of Array controllers: CISCO-UNIFIED-COMPUTING-STORAGE-MIB::cucsStorageControllerTable.'
          item_prototypes:
            -
              uuid: 52055929503041018d8261f15231f346
              name: '{#DISKARRAY_CACHE_LOCATION}: Disk array cache controller battery status'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.9.9.719.1.45.11.1.9.{#SNMPINDEX}'
              key: 'system.hw.diskarray.cache.battery.status[cucsStorageRaidBatteryOperability.{#SNMPINDEX}]'
              history: 1w
              trends: '0'
              description: |
                MIB: CISCO-UNIFIED-COMPUTING-STORAGE-MIB.
                Status da bateria do controlador
              valuemap:
                name: 'CISCO-UNIFIED-COMPUTING-TC-MIB::CucsEquipmentOperability'
              tags:
                -
                  tag: Application
                  value: 'Disk arrays'
              trigger_prototypes:
                -
                  uuid: 0b09b93602c94821ae1126e4f9550436
                  expression: 'count(/Cisco UCS SNMP/system.hw.diskarray.cache.battery.status[cucsStorageRaidBatteryOperability.{#SNMPINDEX}],#1,"eq","{$DISK_ARRAY_CACHE_BATTERY_CRIT_STATUS}")=1'
                  name: '{#DISKARRAY_CACHE_LOCATION}: Disk array cache controller battery is in critical state!'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  description: |
                    Please check the device for faults.
                    Last value: {ITEM.LASTVALUE1}.
                -
                  uuid: d2af6de00e57412d8a2efcb20b1524a4
                  expression: 'count(/Cisco UCS SNMP/system.hw.diskarray.cache.battery.status[cucsStorageRaidBatteryOperability.{#SNMPINDEX}],#1,"ne","{$DISK_ARRAY_CACHE_BATTERY_OK_STATUS}")=1'
                  name: '{#DISKARRAY_CACHE_LOCATION}: Disk array cache controller battery is not in optimal state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  description: |
                    Please check the device for faults.
                    Last value: {ITEM.LASTVALUE1}.
                  dependencies:
                    -
                      name: '{#DISKARRAY_CACHE_LOCATION}: Disk array cache controller battery is in critical state!'
                      expression: 'count(/Cisco UCS SNMP/system.hw.diskarray.cache.battery.status[cucsStorageRaidBatteryOperability.{#SNMPINDEX}],#1,"eq","{$DISK_ARRAY_CACHE_BATTERY_CRIT_STATUS}")=1'
        -
          uuid: b77a56dcaa1947dd8c74b5764c36c22a
          name: 'Array Controller Discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#DISKARRAY_LOCATION},1.3.6.1.4.1.9.9.719.1.45.1.1.2]'
          key: array.discovery
          delay: 1h
          description: 'Scanning table of Array controllers: CISCO-UNIFIED-COMPUTING-STORAGE-MIB::cucsStorageControllerTable.'
          item_prototypes:
            -
              uuid: b0e1dd6aab454628bf46c0dba5293424
              name: '{#DISKARRAY_LOCATION}: Disk array controller model'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.9.9.719.1.45.1.1.5.{#SNMPINDEX}'
              key: 'system.hw.diskarray.model[cucsStorageControllerModel.{#SNMPINDEX}]'
              delay: 1d
              trends: '0'
              value_type: CHAR
              description: |
                MIB: CISCO-UNIFIED-COMPUTING-STORAGE-MIB.
                Modelo do controlador do Disco
              tags:
                -
                  tag: Application
                  value: 'Disk arrays'
            -
              uuid: 262d45ac58734c0096de2b96d8294f4c
              name: '{#DISKARRAY_LOCATION}: Disk array controller status'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.9.9.719.1.45.1.1.6.{#SNMPINDEX}'
              key: 'system.hw.diskarray.status[cucsStorageControllerOperState.{#SNMPINDEX}]'
              history: 1w
              trends: '0'
              description: |
                MIB: CISCO-UNIFIED-COMPUTING-STORAGE-MIB.
                Status do controlador do disco
              valuemap:
                name: 'CISCO-UNIFIED-COMPUTING-TC-MIB::CucsEquipmentOperability'
              tags:
                -
                  tag: Application
                  value: 'Disk arrays'
              trigger_prototypes:
                -
                  uuid: 44ec209460fb4010a087e971427b2fde
                  expression: 'count(/Cisco UCS SNMP/system.hw.diskarray.status[cucsStorageControllerOperState.{#SNMPINDEX}],#1,"eq","{$DISK_ARRAY_CRIT_STATUS:\"inoperable\"}")=1'
                  name: '{#DISKARRAY_LOCATION}: Disk array controller is in critical state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: HIGH
                  description: |
                    Please check the device for faults.
                    Last value: {ITEM.LASTVALUE1}.
                -
                  uuid: b419e0d296614f4285645954f8a7a970
                  expression: 'count(/Cisco UCS SNMP/system.hw.diskarray.status[cucsStorageControllerOperState.{#SNMPINDEX}],#1,"eq","{$DISK_ARRAY_WARN_STATUS:\"degraded\"}")=1'
                  name: '{#DISKARRAY_LOCATION}: Disk array controller is in warning state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  description: |
                    Please check the device for faults.
                    Last value: {ITEM.LASTVALUE1}.
                  dependencies:
                    -
                      name: '{#DISKARRAY_LOCATION}: Disk array controller is in critical state'
                      expression: 'count(/Cisco UCS SNMP/system.hw.diskarray.status[cucsStorageControllerOperState.{#SNMPINDEX}],#1,"eq","{$DISK_ARRAY_CRIT_STATUS:\"inoperable\"}")=1'
                -
                  uuid: a83202bb105d481c93464650272c14eb
                  expression: 'count(/Cisco UCS SNMP/system.hw.diskarray.status[cucsStorageControllerOperState.{#SNMPINDEX}],#1,"ne","{$DISK_ARRAY_OK_STATUS:\"operable\"}")=1'
                  name: '{#DISKARRAY_LOCATION}: Disk array controller is not in optimal state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  description: |
                    Please check the device for faults.
                    Last value: {ITEM.LASTVALUE1}.
                  dependencies:
                    -
                      name: '{#DISKARRAY_LOCATION}: Disk array controller is in critical state'
                      expression: 'count(/Cisco UCS SNMP/system.hw.diskarray.status[cucsStorageControllerOperState.{#SNMPINDEX}],#1,"eq","{$DISK_ARRAY_CRIT_STATUS:\"inoperable\"}")=1'
                    -
                      name: '{#DISKARRAY_LOCATION}: Disk array controller is in warning state'
                      expression: 'count(/Cisco UCS SNMP/system.hw.diskarray.status[cucsStorageControllerOperState.{#SNMPINDEX}],#1,"eq","{$DISK_ARRAY_WARN_STATUS:\"degraded\"}")=1'
        -
          uuid: 3c067096a2fc40c390a335e40bacc089
          name: 'FAN Discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#FAN_LOCATION},1.3.6.1.4.1.9.9.719.1.15.12.1.2]'
          key: fan.discovery
          delay: 1h
          item_prototypes:
            -
              uuid: f65860004eb74ab187d080782177370c
              name: '{#FAN_LOCATION}: Fan status'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.9.9.719.1.15.12.1.9.{#SNMPINDEX}'
              key: 'sensor.fan.status[cucsEquipmentFanOperState.{#SNMPINDEX}]'
              delay: 3m
              history: 2w
              trends: 0d
              description: |
                MIB: CISCO-UNIFIED-COMPUTING-EQUIPMENT-MIB
                Cisco UCS equipment:Fan:operState managed object property
              valuemap:
                name: 'CISCO-UNIFIED-COMPUTING-TC-MIB::CucsEquipmentOperability'
              tags:
                -
                  tag: Application
                  value: Fans
              trigger_prototypes:
                -
                  uuid: 5135b24c775f448c8998cadea3042e5b
                  expression: 'count(/Cisco UCS SNMP/sensor.fan.status[cucsEquipmentFanOperState.{#SNMPINDEX}],#1,"eq","{$FAN_CRIT_STATUS:\"inoperable\"}")=1'
                  name: '{#FAN_LOCATION}: Fan is in critical state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  description: |
                    Please check the fan unit.
                    Last value: {ITEM.LASTVALUE1}.
                -
                  uuid: 895df7f89587441fa61223d5b2e442a2
                  expression: 'count(/Cisco UCS SNMP/sensor.fan.status[cucsEquipmentFanOperState.{#SNMPINDEX}],#1,"eq","{$FAN_WARN_STATUS:\"degraded\"}")=1'
                  name: '{#FAN_LOCATION}: Fan is in warning state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  description: |
                    Please check the fan unit.
                    Last value: {ITEM.LASTVALUE1}.
                  dependencies:
                    -
                      name: '{#FAN_LOCATION}: Fan is in critical state'
                      expression: 'count(/Cisco UCS SNMP/sensor.fan.status[cucsEquipmentFanOperState.{#SNMPINDEX}],#1,"eq","{$FAN_CRIT_STATUS:\"inoperable\"}")=1'
        -
          uuid: 93247d3808394f7195356ced554d0d55
          name: 'Physical Disk Discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#DISK_LOCATION},1.3.6.1.4.1.9.9.719.1.45.4.1.2]'
          key: physicalDisk.discovery
          delay: 1h
          description: 'Scanning table of physical drive entries CISCO-UNIFIED-COMPUTING-STORAGE-MIB::cucsStorageLocalDiskTable.'
          item_prototypes:
            -
              uuid: 4dc3f8718af645998441c436263a1053
              name: '{#DISK_LOCATION}: Physical disk media type'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.9.9.719.1.45.4.1.7.{#SNMPINDEX}'
              key: 'system.hw.physicaldisk.media_type[cucsStorageLocalDiskModel.{#SNMPINDEX}]'
              delay: 1h
              history: 2w
              trends: '0'
              value_type: CHAR
              description: |
                MIB: CISCO-UNIFIED-COMPUTING-STORAGE-MIB
                Cisco UCS storage:LocalDisk:model managed object property. Actually returns 'HDD' or 'SSD'
              tags:
                -
                  tag: Application
                  value: 'Physical disks'
            -
              uuid: 6d45ac307cce40d481c556660dea3157
              name: '{#DISK_LOCATION}: Physical disk model name'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.9.9.719.1.45.4.1.12.{#SNMPINDEX}'
              key: 'system.hw.physicaldisk.model[cucsStorageLocalDiskSerial.{#SNMPINDEX}]'
              delay: 1h
              history: 2w
              trends: '0'
              value_type: CHAR
              description: |
                MIB: CISCO-UNIFIED-COMPUTING-STORAGE-MIB
                Cisco UCS storage:LocalDisk:serial managed object property. Actually returns part number code
              tags:
                -
                  tag: Application
                  value: 'Physical disks'
            -
              uuid: da12b7742c0343709ab4c1d97c0b0f4c
              name: '{#DISK_LOCATION}: Disk size'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.9.9.719.1.45.4.1.13.{#SNMPINDEX}'
              key: 'system.hw.physicaldisk.size[cucsStorageLocalDiskSize.{#SNMPINDEX}]'
              delay: 1h
              history: 2w
              trends: 0d
              units: B
              description: |
                MIB: CISCO-UNIFIED-COMPUTING-STORAGE-MIB
                Cisco UCS storage:LocalDisk:size managed object property. In MB.
              preprocessing:
                -
                  type: MULTIPLIER
                  parameters:
                    - '1048576'
              tags:
                -
                  tag: Application
                  value: 'Physical disks'
            -
              uuid: cb73c8de596549888d5f94b13619da3d
              name: '{#DISK_LOCATION}: Physical disk status'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.9.9.719.1.45.4.1.18.{#SNMPINDEX}'
              key: 'system.hw.physicaldisk.status[cucsStorageLocalDiskDiskState.{#SNMPINDEX}]'
              delay: 3m
              trends: 0d
              description: |
                MIB: CISCO-UNIFIED-COMPUTING-STORAGE-MIB
                Cisco UCS storage:LocalDisk:diskState managed object property.
              valuemap:
                name: 'CISCO-UNIFIED-COMPUTING-TC-MIB::CucsStoragePDriveStatus'
              tags:
                -
                  tag: Application
                  value: 'Physical disks'
              trigger_prototypes:
                -
                  uuid: 445919e1ec414fd888f8911abc65650b
                  expression: 'count(/Cisco UCS SNMP/system.hw.physicaldisk.status[cucsStorageLocalDiskDiskState.{#SNMPINDEX}],#1,"eq","{$DISK_CRIT_STATUS:\"bad\"}")=1 or count(/Cisco UCS SNMP/system.hw.physicaldisk.status[cucsStorageLocalDiskDiskState.{#SNMPINDEX}],#1,"eq","{$DISK_CRIT_STATUS:\"predictiveFailure\"}")=1'
                  name: '{#DISK_LOCATION}: Physical disk error'
                  opdata: 'Current status: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  description: |
                    Please check physical disk for warnings or errors.
                    Last value: {ITEM.LASTVALUE1}.
                  dependencies:
                    -
                      name: '{#DISK_LOCATION}: Physical disk failed'
                      expression: 'count(/Cisco UCS SNMP/system.hw.physicaldisk.status[cucsStorageLocalDiskDiskState.{#SNMPINDEX}],#1,"eq","{$DISK_FAIL_STATUS:\"failed\"}")=1'
                -
                  uuid: 77ce5c74eefd4a9b818c11c8c1581cd8
                  expression: 'count(/Cisco UCS SNMP/system.hw.physicaldisk.status[cucsStorageLocalDiskDiskState.{#SNMPINDEX}],#1,"eq","{$DISK_FAIL_STATUS:\"failed\"}")=1'
                  name: '{#DISK_LOCATION}: Physical disk failed'
                  opdata: 'Current status: {ITEM.LASTVALUE1}'
                  priority: HIGH
                  description: |
                    Please check physical disk for warnings or errors.
                    Last value: {ITEM.LASTVALUE1}.
        -
          uuid: f8be95a8eb5a487c8c8f05d62e90f041
          name: 'PSU Discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#PSU_LOCATION},1.3.6.1.4.1.9.9.719.1.15.56.1.2]'
          key: psu.discovery
          delay: 1h
          item_prototypes:
            -
              uuid: 0e869e57db494940b630fc2b8f10c60b
              name: '{#PSU_LOCATION}: Power supply status'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.9.9.719.1.15.56.1.7.{#SNMPINDEX}'
              key: 'sensor.psu.status[cucsEquipmentPsuOperState.{#SNMPINDEX}]'
              delay: 3m
              history: 2w
              trends: 0d
              description: |
                MIB: CISCO-UNIFIED-COMPUTING-EQUIPMENT-MIB
                Cisco UCS equipment:Psu:operState managed object property
              valuemap:
                name: 'CISCO-UNIFIED-COMPUTING-TC-MIB::CucsEquipmentOperability'
              tags:
                -
                  tag: Application
                  value: 'Power supply'
              trigger_prototypes:
                -
                  uuid: 480d51d19be74b6e95f702b31baa5666
                  expression: 'count(/Cisco UCS SNMP/sensor.psu.status[cucsEquipmentPsuOperState.{#SNMPINDEX}],#1,"eq","{$PSU_CRIT_STATUS:\"inoperable\"}")=1'
                  name: '{#PSU_LOCATION}: Power supply is in critical state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  description: |
                    Please check the power supply unit for errors.
                    Last value: {ITEM.LASTVALUE1}.
                -
                  uuid: 07fa90b5296b48d9b45cc6a76e72ceeb
                  expression: 'count(/Cisco UCS SNMP/sensor.psu.status[cucsEquipmentPsuOperState.{#SNMPINDEX}],#1,"eq","{$PSU_WARN_STATUS:\"degraded\"}")=1'
                  name: '{#PSU_LOCATION}: Power supply is in warning state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  description: |
                    Please check the power supply unit for errors.
                    Last value: {ITEM.LASTVALUE1}.
                  dependencies:
                    -
                      name: '{#PSU_LOCATION}: Power supply is in critical state'
                      expression: 'count(/Cisco UCS SNMP/sensor.psu.status[cucsEquipmentPsuOperState.{#SNMPINDEX}],#1,"eq","{$PSU_CRIT_STATUS:\"inoperable\"}")=1'
        -
          uuid: 098a87f2e7094da9853bf2cb94677092
          name: 'Temperature CPU Discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SENSOR_LOCATION},1.3.6.1.4.1.9.9.719.1.41.2.1.2]'
          key: temp.cpu.discovery
          delay: 1h
          item_prototypes:
            -
              uuid: b0a744fc4e524406ab87ccc4fbaae3b2
              name: '{#SENSOR_LOCATION}: Temperature'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.9.9.719.1.41.2.1.10.{#SNMPINDEX}'
              key: 'sensor.temp.value[cucsProcessorEnvStatsTemperature.{#SNMPINDEX}]'
              delay: 3m
              value_type: FLOAT
              units: °C
              description: |
                MIB: CISCO-UNIFIED-COMPUTING-PROCESSOR-MIB
                Cisco UCS processor:EnvStats:temperature managed object property
              tags:
                -
                  tag: Application
                  value: Temperature
              trigger_prototypes:
                -
                  uuid: 35549eb00faf48ff8fdb7769b8a13895
                  expression: 'avg(/Cisco UCS SNMP/sensor.temp.value[cucsProcessorEnvStatsTemperature.{#SNMPINDEX}],5m)>{$TEMP_CRIT:"CPU"}'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'max(/Cisco UCS SNMP/sensor.temp.value[cucsProcessorEnvStatsTemperature.{#SNMPINDEX}],5m)<{$TEMP_CRIT:"CPU"}-3'
                  name: '{#SENSOR_LOCATION}: Temperature is above critical threshold: >{$TEMP_CRIT:"CPU"}'
                  opdata: 'Current value: {ITEM.LASTVALUE1}'
                  priority: HIGH
                  description: |
                    This trigger uses temperature sensor values as well as temperature sensor status if available.
                    Last value: {ITEM.LASTVALUE1}.
                -
                  uuid: eaadcea2dc0d468d886654c3ec380390
                  expression: 'avg(/Cisco UCS SNMP/sensor.temp.value[cucsProcessorEnvStatsTemperature.{#SNMPINDEX}],5m)>{$TEMP_WARN:"CPU"}'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'max(/Cisco UCS SNMP/sensor.temp.value[cucsProcessorEnvStatsTemperature.{#SNMPINDEX}],5m)<{$TEMP_WARN:"CPU"}-3'
                  name: '{#SENSOR_LOCATION}: Temperature is above warning threshold: >{$TEMP_WARN:"CPU"}'
                  opdata: 'Current value: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  description: |
                    This trigger uses temperature sensor values as well as temperature sensor status if available.
                    Last value: {ITEM.LASTVALUE1}.
                  dependencies:
                    -
                      name: '{#SENSOR_LOCATION}: Temperature is above critical threshold: >{$TEMP_CRIT:"CPU"}'
                      expression: 'avg(/Cisco UCS SNMP/sensor.temp.value[cucsProcessorEnvStatsTemperature.{#SNMPINDEX}],5m)>{$TEMP_CRIT:"CPU"}'
                      recovery_expression: 'max(/Cisco UCS SNMP/sensor.temp.value[cucsProcessorEnvStatsTemperature.{#SNMPINDEX}],5m)<{$TEMP_CRIT:"CPU"}-3'
                -
                  uuid: ccb9b9edd7ba4a62b33e34ebf3647825
                  expression: 'avg(/Cisco UCS SNMP/sensor.temp.value[cucsProcessorEnvStatsTemperature.{#SNMPINDEX}],5m)<{$TEMP_CRIT_LOW:"CPU"}'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'min(/Cisco UCS SNMP/sensor.temp.value[cucsProcessorEnvStatsTemperature.{#SNMPINDEX}],5m)>{$TEMP_CRIT_LOW:"CPU"}+3'
                  name: '{#SENSOR_LOCATION}: Temperature is too low: <{$TEMP_CRIT_LOW:"CPU"}'
                  opdata: 'Current value: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  description: 'Last value: {ITEM.LASTVALUE1}.'
        -
          uuid: 06216bba529b4fb2b1c52fb57d365c6a
          name: 'Temperature Discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SENSOR_LOCATION},1.3.6.1.4.1.9.9.719.1.9.44.1.2]'
          key: temp.discovery
          delay: 1h
          item_prototypes:
            -
              uuid: 1287280a5c9449bd96f11ad3b6a92455
              name: '{#SENSOR_LOCATION}.IOH: Temperature'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.9.9.719.1.9.44.1.13.{#SNMPINDEX}'
              key: 'sensor.temp.value[cucsComputeRackUnitMbTempSltatsIoh1Temp.{#SNMPINDEX}]'
              delay: 3m
              value_type: FLOAT
              units: °C
              description: |
                MIB: CISCO-UNIFIED-COMPUTING-COMPUTE-MIB
                Cisco UCS compute:RackUnitMbTempStats:ioh1Temp managed object property
              tags:
                -
                  tag: Application
                  value: Temperature
              trigger_prototypes:
                -
                  uuid: a43eb91c4ae044729f4312466fcbd5da
                  expression: 'avg(/Cisco UCS SNMP/sensor.temp.value[cucsComputeRackUnitMbTempSltatsIoh1Temp.{#SNMPINDEX}],5m)>{$TEMP_CRIT:"Ambient"}'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'max(/Cisco UCS SNMP/sensor.temp.value[cucsComputeRackUnitMbTempSltatsIoh1Temp.{#SNMPINDEX}],5m)<{$TEMP_CRIT:"Ambient"}-3'
                  name: '{#SENSOR_LOCATION}.IOH: Temperature is above critical threshold: >{$TEMP_CRIT:"Ambient"}'
                  opdata: 'Current value: {ITEM.LASTVALUE1}'
                  priority: HIGH
                  description: |
                    This trigger uses temperature sensor values as well as temperature sensor status if available.
                    Last value: {ITEM.LASTVALUE1}.
                -
                  uuid: da5d63d3411a4d2299d50cc21beae1c4
                  expression: 'avg(/Cisco UCS SNMP/sensor.temp.value[cucsComputeRackUnitMbTempSltatsIoh1Temp.{#SNMPINDEX}],5m)>{$TEMP_WARN:"Ambient"}'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'max(/Cisco UCS SNMP/sensor.temp.value[cucsComputeRackUnitMbTempSltatsIoh1Temp.{#SNMPINDEX}],5m)<{$TEMP_WARN:"Ambient"}-3'
                  name: '{#SENSOR_LOCATION}.IOH: Temperature is above warning threshold: >{$TEMP_WARN:"Ambient"}'
                  opdata: 'Current value: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  description: |
                    This trigger uses temperature sensor values as well as temperature sensor status if available.
                    Last value: {ITEM.LASTVALUE1}.
                  dependencies:
                    -
                      name: '{#SENSOR_LOCATION}.IOH: Temperature is above critical threshold: >{$TEMP_CRIT:"Ambient"}'
                      expression: 'avg(/Cisco UCS SNMP/sensor.temp.value[cucsComputeRackUnitMbTempSltatsIoh1Temp.{#SNMPINDEX}],5m)>{$TEMP_CRIT:"Ambient"}'
                      recovery_expression: 'max(/Cisco UCS SNMP/sensor.temp.value[cucsComputeRackUnitMbTempSltatsIoh1Temp.{#SNMPINDEX}],5m)<{$TEMP_CRIT:"Ambient"}-3'
                -
                  uuid: ce811e4247d5484caf4b095e829f162e
                  expression: 'avg(/Cisco UCS SNMP/sensor.temp.value[cucsComputeRackUnitMbTempSltatsIoh1Temp.{#SNMPINDEX}],5m)<{$TEMP_CRIT_LOW:"Ambient"}'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'min(/Cisco UCS SNMP/sensor.temp.value[cucsComputeRackUnitMbTempSltatsIoh1Temp.{#SNMPINDEX}],5m)>{$TEMP_CRIT_LOW:"Ambient"}+3'
                  name: '{#SENSOR_LOCATION}.IOH: Temperature is too low: <{$TEMP_CRIT_LOW:"Ambient"}'
                  opdata: 'Current value: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  description: 'Last value: {ITEM.LASTVALUE1}.'
            -
              uuid: 9ee4d857346541c6870586a0c7989fc5
              name: '{#SENSOR_LOCATION}.Ambient: Temperature'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.9.9.719.1.9.44.1.4.{#SNMPINDEX}'
              key: 'sensor.temp.value[cucsComputeRackUnitMbTempStatsAmbientTemp.{#SNMPINDEX}]'
              delay: 3m
              value_type: FLOAT
              units: °C
              description: |
                MIB: CISCO-UNIFIED-COMPUTING-COMPUTE-MIB
                Temperature readings of testpoint: {#SENSOR_LOCATION}.Ambient
              tags:
                -
                  tag: Application
                  value: Temperature
              trigger_prototypes:
                -
                  uuid: 4e293138ca374c96a18e4dbca8e45c72
                  expression: 'avg(/Cisco UCS SNMP/sensor.temp.value[cucsComputeRackUnitMbTempStatsAmbientTemp.{#SNMPINDEX}],5m)>{$TEMP_CRIT:"Ambient"}'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'max(/Cisco UCS SNMP/sensor.temp.value[cucsComputeRackUnitMbTempStatsAmbientTemp.{#SNMPINDEX}],5m)<{$TEMP_CRIT:"Ambient"}-3'
                  name: '{#SENSOR_LOCATION}.Ambient: Temperature is above critical threshold: >{$TEMP_CRIT:"Ambient"}'
                  opdata: 'Current value: {ITEM.LASTVALUE1}'
                  priority: HIGH
                  description: |
                    This trigger uses temperature sensor values as well as temperature sensor status if available.
                    Last value: {ITEM.LASTVALUE1}.
                -
                  uuid: cf21a0259b6e4402815651357cdcce76
                  expression: 'avg(/Cisco UCS SNMP/sensor.temp.value[cucsComputeRackUnitMbTempStatsAmbientTemp.{#SNMPINDEX}],5m)>{$TEMP_WARN:"Ambient"}'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'max(/Cisco UCS SNMP/sensor.temp.value[cucsComputeRackUnitMbTempStatsAmbientTemp.{#SNMPINDEX}],5m)<{$TEMP_WARN:"Ambient"}-3'
                  name: '{#SENSOR_LOCATION}.Ambient: Temperature is above warning threshold: >{$TEMP_WARN:"Ambient"}'
                  opdata: 'Current value: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  description: |
                    This trigger uses temperature sensor values as well as temperature sensor status if available.
                    Last value: {ITEM.LASTVALUE1}.
                  dependencies:
                    -
                      name: '{#SENSOR_LOCATION}.Ambient: Temperature is above critical threshold: >{$TEMP_CRIT:"Ambient"}'
                      expression: 'avg(/Cisco UCS SNMP/sensor.temp.value[cucsComputeRackUnitMbTempStatsAmbientTemp.{#SNMPINDEX}],5m)>{$TEMP_CRIT:"Ambient"}'
                      recovery_expression: 'max(/Cisco UCS SNMP/sensor.temp.value[cucsComputeRackUnitMbTempStatsAmbientTemp.{#SNMPINDEX}],5m)<{$TEMP_CRIT:"Ambient"}-3'
                -
                  uuid: 5139f8dd56094561a573a0b7b15a5ef0
                  expression: 'avg(/Cisco UCS SNMP/sensor.temp.value[cucsComputeRackUnitMbTempStatsAmbientTemp.{#SNMPINDEX}],5m)<{$TEMP_CRIT_LOW:"Ambient"}'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'min(/Cisco UCS SNMP/sensor.temp.value[cucsComputeRackUnitMbTempStatsAmbientTemp.{#SNMPINDEX}],5m)>{$TEMP_CRIT_LOW:"Ambient"}+3'
                  name: '{#SENSOR_LOCATION}.Ambient: Temperature is too low: <{$TEMP_CRIT_LOW:"Ambient"}'
                  opdata: 'Current value: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  description: 'Last value: {ITEM.LASTVALUE1}.'
            -
              uuid: 9dc8ac1ccf2a4671bef441db6297b2f9
              name: '{#SENSOR_LOCATION}.Front: Temperature'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.9.9.719.1.9.44.1.8.{#SNMPINDEX}'
              key: 'sensor.temp.value[cucsComputeRackUnitMbTempStatsFrontTemp.{#SNMPINDEX}]'
              delay: 3m
              value_type: FLOAT
              units: °C
              description: |
                MIB: CISCO-UNIFIED-COMPUTING-COMPUTE-MIB
                Cisco UCS compute:RackUnitMbTempStats:frontTemp managed object property
              tags:
                -
                  tag: Application
                  value: Temperature
              trigger_prototypes:
                -
                  uuid: 98b9a6bd22e648e1bce3e5ee3ed5f6b4
                  expression: 'avg(/Cisco UCS SNMP/sensor.temp.value[cucsComputeRackUnitMbTempStatsFrontTemp.{#SNMPINDEX}],5m)>{$TEMP_CRIT:"Ambient"}'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'max(/Cisco UCS SNMP/sensor.temp.value[cucsComputeRackUnitMbTempStatsFrontTemp.{#SNMPINDEX}],5m)<{$TEMP_CRIT:"Ambient"}-3'
                  name: '{#SENSOR_LOCATION}.Front: Temperature is above critical threshold: >{$TEMP_CRIT:"Ambient"}'
                  opdata: 'Current value: {ITEM.LASTVALUE1}'
                  priority: HIGH
                  description: |
                    This trigger uses temperature sensor values as well as temperature sensor status if available.
                    Last value: {ITEM.LASTVALUE1}.
                -
                  uuid: 068f42b490ad41eb97a65dbc718ae566
                  expression: 'avg(/Cisco UCS SNMP/sensor.temp.value[cucsComputeRackUnitMbTempStatsFrontTemp.{#SNMPINDEX}],5m)>{$TEMP_WARN:"Ambient"}'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'max(/Cisco UCS SNMP/sensor.temp.value[cucsComputeRackUnitMbTempStatsFrontTemp.{#SNMPINDEX}],5m)<{$TEMP_WARN:"Ambient"}-3'
                  name: '{#SENSOR_LOCATION}.Front: Temperature is above warning threshold: >{$TEMP_WARN:"Ambient"}'
                  opdata: 'Current value: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  description: |
                    This trigger uses temperature sensor values as well as temperature sensor status if available.
                    Last value: {ITEM.LASTVALUE1}.
                  dependencies:
                    -
                      name: '{#SENSOR_LOCATION}.Front: Temperature is above critical threshold: >{$TEMP_CRIT:"Ambient"}'
                      expression: 'avg(/Cisco UCS SNMP/sensor.temp.value[cucsComputeRackUnitMbTempStatsFrontTemp.{#SNMPINDEX}],5m)>{$TEMP_CRIT:"Ambient"}'
                      recovery_expression: 'max(/Cisco UCS SNMP/sensor.temp.value[cucsComputeRackUnitMbTempStatsFrontTemp.{#SNMPINDEX}],5m)<{$TEMP_CRIT:"Ambient"}-3'
                -
                  uuid: f208cad426cf45338b6487cf87588220
                  expression: 'avg(/Cisco UCS SNMP/sensor.temp.value[cucsComputeRackUnitMbTempStatsFrontTemp.{#SNMPINDEX}],5m)<{$TEMP_CRIT_LOW:"Ambient"}'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'min(/Cisco UCS SNMP/sensor.temp.value[cucsComputeRackUnitMbTempStatsFrontTemp.{#SNMPINDEX}],5m)>{$TEMP_CRIT_LOW:"Ambient"}+3'
                  name: '{#SENSOR_LOCATION}.Front: Temperature is too low: <{$TEMP_CRIT_LOW:"Ambient"}'
                  opdata: 'Current value: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  description: 'Last value: {ITEM.LASTVALUE1}.'
            -
              uuid: 631d46aad1b2403b9512299e2446a24e
              name: '{#SENSOR_LOCATION}.Rear: Temperature'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.9.9.719.1.9.44.1.21.{#SNMPINDEX}'
              key: 'sensor.temp.value[cucsComputeRackUnitMbTempStatsRearTemp.{#SNMPINDEX}]'
              delay: 3m
              value_type: FLOAT
              units: °C
              description: |
                MIB: CISCO-UNIFIED-COMPUTING-COMPUTE-MIB
                Cisco UCS compute:RackUnitMbTempStats:rearTemp managed object property
              tags:
                -
                  tag: Application
                  value: Temperature
              trigger_prototypes:
                -
                  uuid: ef03cd1e2356409ea2651fab589c9d19
                  expression: 'avg(/Cisco UCS SNMP/sensor.temp.value[cucsComputeRackUnitMbTempStatsRearTemp.{#SNMPINDEX}],5m)>{$TEMP_CRIT:"Ambient"}'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'max(/Cisco UCS SNMP/sensor.temp.value[cucsComputeRackUnitMbTempStatsRearTemp.{#SNMPINDEX}],5m)<{$TEMP_CRIT:"Ambient"}-3'
                  name: '{#SENSOR_LOCATION}.Rear: Temperature is above critical threshold: >{$TEMP_CRIT:"Ambient"}'
                  opdata: 'Current value: {ITEM.LASTVALUE1}'
                  priority: HIGH
                  description: |
                    This trigger uses temperature sensor values as well as temperature sensor status if available.
                    Last value: {ITEM.LASTVALUE1}.
                -
                  uuid: ed302fd9bdbe47cda2456aa7cdc6ce66
                  expression: 'avg(/Cisco UCS SNMP/sensor.temp.value[cucsComputeRackUnitMbTempStatsRearTemp.{#SNMPINDEX}],5m)>{$TEMP_WARN:"Ambient"}'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'max(/Cisco UCS SNMP/sensor.temp.value[cucsComputeRackUnitMbTempStatsRearTemp.{#SNMPINDEX}],5m)<{$TEMP_WARN:"Ambient"}-3'
                  name: '{#SENSOR_LOCATION}.Rear: Temperature is above warning threshold: >{$TEMP_WARN:"Ambient"}'
                  opdata: 'Current value: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  description: |
                    This trigger uses temperature sensor values as well as temperature sensor status if available.
                    Last value: {ITEM.LASTVALUE1}.
                  dependencies:
                    -
                      name: '{#SENSOR_LOCATION}.Rear: Temperature is above critical threshold: >{$TEMP_CRIT:"Ambient"}'
                      expression: 'avg(/Cisco UCS SNMP/sensor.temp.value[cucsComputeRackUnitMbTempStatsRearTemp.{#SNMPINDEX}],5m)>{$TEMP_CRIT:"Ambient"}'
                      recovery_expression: 'max(/Cisco UCS SNMP/sensor.temp.value[cucsComputeRackUnitMbTempStatsRearTemp.{#SNMPINDEX}],5m)<{$TEMP_CRIT:"Ambient"}-3'
                -
                  uuid: bb81b628d804411480d3b4066d626f82
                  expression: 'avg(/Cisco UCS SNMP/sensor.temp.value[cucsComputeRackUnitMbTempStatsRearTemp.{#SNMPINDEX}],5m)<{$TEMP_CRIT_LOW:"Ambient"}'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'min(/Cisco UCS SNMP/sensor.temp.value[cucsComputeRackUnitMbTempStatsRearTemp.{#SNMPINDEX}],5m)>{$TEMP_CRIT_LOW:"Ambient"}+3'
                  name: '{#SENSOR_LOCATION}.Rear: Temperature is too low: <{$TEMP_CRIT_LOW:"Ambient"}'
                  opdata: 'Current value: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  description: 'Last value: {ITEM.LASTVALUE1}.'
        -
          uuid: 0a96ab839bde40cf9d1d4db602c57a5e
          name: 'Unit Discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#UNIT_LOCATION},1.3.6.1.4.1.9.9.719.1.9.35.1.2]'
          key: unit.discovery
          delay: 1h
          item_prototypes:
            -
              uuid: 9d0f6f5594a24c588da63fd29bf2152f
              name: '{#UNIT_LOCATION}: Hardware model name'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.9.9.719.1.9.35.1.32.{#SNMPINDEX}'
              key: 'system.hw.model[cucsComputeRackUnitModel.{#SNMPINDEX}]'
              delay: 1h
              history: 2w
              trends: '0'
              value_type: CHAR
              description: |
                MIB: CISCO-UNIFIED-COMPUTING-COMPUTE-MIB
                Cisco UCS compute:RackUnit:model managed object property
              preprocessing:
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 1d
              tags:
                -
                  tag: Application
                  value: Inventory
            -
              uuid: b0c955f0fc184c6686fa2fe3fce29f1a
              name: '{#UNIT_LOCATION}: Hardware serial number'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.9.9.719.1.9.35.1.47.{#SNMPINDEX}'
              key: 'system.hw.serialnumber[cucsComputeRackUnitSerial.{#SNMPINDEX}]'
              delay: 1h
              history: 2w
              trends: '0'
              value_type: CHAR
              description: |
                MIB: CISCO-UNIFIED-COMPUTING-COMPUTE-MIB
                Cisco UCS compute:RackUnit:serial managed object property
              preprocessing:
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 1d
              tags:
                -
                  tag: Application
                  value: Inventory
              trigger_prototypes:
                -
                  uuid: b9667c535fe542eeb21dea7aaf2bbf80
                  expression: '(last(/Cisco UCS SNMP/system.hw.serialnumber[cucsComputeRackUnitSerial.{#SNMPINDEX}],#1)<>last(/Cisco UCS SNMP/system.hw.serialnumber[cucsComputeRackUnitSerial.{#SNMPINDEX}],#2))=1 and length(last(/Cisco UCS SNMP/system.hw.serialnumber[cucsComputeRackUnitSerial.{#SNMPINDEX}]))>0'
                  name: '{#UNIT_LOCATION}: Device has been replaced (new serial number received)'
                  priority: INFO
                  description: |
                    Device serial number has changed. Ack to close.
                    Last value: {ITEM.LASTVALUE1}.
                  manual_close: 'YES'
            -
              uuid: 00a0fe6510064375a1736433a17904c0
              name: '{#UNIT_LOCATION}: Overall system health status'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.9.9.719.1.9.35.1.42.{#SNMPINDEX}'
              key: 'system.status[cucsComputeRackUnitOperState.{#SNMPINDEX}]'
              delay: 30s
              history: 2w
              trends: 0d
              description: |
                MIB: CISCO-UNIFIED-COMPUTING-COMPUTE-MIB
                Cisco UCS compute:RackUnit:operState managed object property
              valuemap:
                name: 'CISCO-UNIFIED-COMPUTING-TC-MIB::CucsLsOperState'
              tags:
                -
                  tag: Application
                  value: Status
              trigger_prototypes:
                -
                  uuid: 70fbf187bc474aa88a26fb5a8d862694
                  expression: 'count(/Cisco UCS SNMP/system.status[cucsComputeRackUnitOperState.{#SNMPINDEX}],#1,"eq","{$HEALTH_CRIT_STATUS:\"computeFailed\"}")=1 or count(/Cisco UCS SNMP/system.status[cucsComputeRackUnitOperState.{#SNMPINDEX}],#1,"eq","{$HEALTH_CRIT_STATUS:\"configFailure\"}")=1 or count(/Cisco UCS SNMP/system.status[cucsComputeRackUnitOperState.{#SNMPINDEX}],#1,"eq","{$HEALTH_CRIT_STATUS:\"unconfigFailure\"}")=1 or count(/Cisco UCS SNMP/system.status[cucsComputeRackUnitOperState.{#SNMPINDEX}],#1,"eq","{$HEALTH_CRIT_STATUS:\"inoperable\"}")=1'
                  name: '{#UNIT_LOCATION}: System status is in critical state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: HIGH
                  description: |
                    Please check the device for errors.
                    Last value: {ITEM.LASTVALUE1}.
                -
                  uuid: b69f6876b7de4e1c89934281696249c8
                  expression: 'count(/Cisco UCS SNMP/system.status[cucsComputeRackUnitOperState.{#SNMPINDEX}],#1,"eq","{$HEALTH_WARN_STATUS:\"testFailed\"}")=1 or count(/Cisco UCS SNMP/system.status[cucsComputeRackUnitOperState.{#SNMPINDEX}],#1,"eq","{$HEALTH_WARN_STATUS:\"thermalProblem\"}")=1 or count(/Cisco UCS SNMP/system.status[cucsComputeRackUnitOperState.{#SNMPINDEX}],#1,"eq","{$HEALTH_WARN_STATUS:\"powerProblem\"}")=1 or count(/Cisco UCS SNMP/system.status[cucsComputeRackUnitOperState.{#SNMPINDEX}],#1,"eq","{$HEALTH_WARN_STATUS:\"voltageProblem\"}")=1 or count(/Cisco UCS SNMP/system.status[cucsComputeRackUnitOperState.{#SNMPINDEX}],#1,"eq","{$HEALTH_WARN_STATUS:\"diagnosticsFailed\"}")=1'
                  name: '{#UNIT_LOCATION}: System status is in warning state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  description: |
                    Please check the device for warnings.
                    Last value: {ITEM.LASTVALUE1}.
                  dependencies:
                    -
                      name: '{#UNIT_LOCATION}: System status is in critical state'
                      expression: 'count(/Cisco UCS SNMP/system.status[cucsComputeRackUnitOperState.{#SNMPINDEX}],#1,"eq","{$HEALTH_CRIT_STATUS:\"computeFailed\"}")=1 or count(/Cisco UCS SNMP/system.status[cucsComputeRackUnitOperState.{#SNMPINDEX}],#1,"eq","{$HEALTH_CRIT_STATUS:\"configFailure\"}")=1 or count(/Cisco UCS SNMP/system.status[cucsComputeRackUnitOperState.{#SNMPINDEX}],#1,"eq","{$HEALTH_CRIT_STATUS:\"unconfigFailure\"}")=1 or count(/Cisco UCS SNMP/system.status[cucsComputeRackUnitOperState.{#SNMPINDEX}],#1,"eq","{$HEALTH_CRIT_STATUS:\"inoperable\"}")=1'
        -
          uuid: b76c04b65a8348539434d8857d1450aa
          name: 'Virtual Disk Discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#VDISK_LOCATION},1.3.6.1.4.1.9.9.719.1.45.8.1.2]'
          key: virtualdisk.discovery
          delay: 1h
          description: 'CISCO-UNIFIED-COMPUTING-STORAGE-MIB::cucsStorageLocalLunTable'
          item_prototypes:
            -
              uuid: 0c6d53aae84e41fa9bdccf06a51bbf21
              name: '{#VDISK_LOCATION}: Layout type'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.9.9.719.1.45.8.1.14.{#SNMPINDEX}'
              key: 'system.hw.virtualdisk.layout[cucsStorageLocalLunType.{#SNMPINDEX}]'
              delay: 1h
              history: 2w
              description: |
                MIB: CISCO-UNIFIED-COMPUTING-STORAGE-MIB
                Cisco UCS storage:LocalLun:type managed object property
              valuemap:
                name: 'CISCO-UNIFIED-COMPUTING-TC-MIB::CucsStorageLunType'
              tags:
                -
                  tag: Application
                  value: 'Virtual disks'
            -
              uuid: db7e07e0325145d0a8f6bcef0cd0dff2
              name: '{#VDISK_LOCATION}: Disk size'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.9.9.719.1.45.8.1.13.{#SNMPINDEX}'
              key: 'system.hw.virtualdisk.size[cucsStorageLocalLunSize.{#SNMPINDEX}]'
              delay: 1h
              history: 2w
              trends: 0d
              units: B
              description: |
                MIB: CISCO-UNIFIED-COMPUTING-STORAGE-MIB
                Cisco UCS storage:LocalLun:size managed object property in MB.
              valuemap:
                name: 'CISCO-UNIFIED-COMPUTING-TC-MIB::CucsStorageLunType'
              preprocessing:
                -
                  type: MULTIPLIER
                  parameters:
                    - '1048576'
              tags:
                -
                  tag: Application
                  value: 'Virtual disks'
            -
              uuid: 5c0d7116c19940608ca40058e47fd595
              name: '{#VDISK_LOCATION}: Status'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.9.9.719.1.45.8.1.10.{#SNMPINDEX}'
              key: 'system.hw.virtualdisk.status[cucsStorageLocalLunPresence.{#SNMPINDEX}]'
              delay: 3m
              history: 2w
              description: |
                MIB: CISCO-UNIFIED-COMPUTING-STORAGE-MIB
                Cisco UCS storage:LocalLun:presence managed object property
              valuemap:
                name: 'CISCO-UNIFIED-COMPUTING-TC-MIB::CucsEquipmentPresence'
              tags:
                -
                  tag: Application
                  value: 'Virtual disks'
              trigger_prototypes:
                -
                  uuid: 97b0c8177dca421f9535cb6f0abea7aa
                  expression: 'count(/Cisco UCS SNMP/system.hw.virtualdisk.status[cucsStorageLocalLunPresence.{#SNMPINDEX}],#1,"ne","{$VDISK_OK_STATUS:\"equipped\"}")=1'
                  name: '{#VDISK_LOCATION}: Virtual disk is not in OK state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  description: |
                    Please check virtual disk for warnings or errors.
                    Last value: {ITEM.LASTVALUE1}.
      macros:
        -
          macro: '{$DISK_ARRAY_CACHE_BATTERY_CRIT_STATUS}'
          value: '2'
        -
          macro: '{$DISK_ARRAY_CACHE_BATTERY_OK_STATUS}'
          value: '1'
        -
          macro: '{$DISK_ARRAY_CRIT_STATUS:"inoperable"}'
          value: '2'
        -
          macro: '{$DISK_ARRAY_OK_STATUS:"operable"}'
          value: '1'
        -
          macro: '{$DISK_ARRAY_WARN_STATUS:"degraded"}'
          value: '3'
        -
          macro: '{$DISK_CRIT_STATUS:"bad"}'
          value: '16'
        -
          macro: '{$DISK_CRIT_STATUS:"predictiveFailure"}'
          value: '11'
        -
          macro: '{$DISK_FAIL_STATUS:"failed"}'
          value: '9'
        -
          macro: '{$FAN_CRIT_STATUS:"inoperable"}'
          value: '2'
        -
          macro: '{$FAN_WARN_STATUS:"degraded"}'
          value: '3'
        -
          macro: '{$HEALTH_CRIT_STATUS:"computeFailed"}'
          value: '30'
        -
          macro: '{$HEALTH_CRIT_STATUS:"configFailure"}'
          value: '33'
        -
          macro: '{$HEALTH_CRIT_STATUS:"inoperable"}'
          value: '60'
        -
          macro: '{$HEALTH_CRIT_STATUS:"unconfigFailure"}'
          value: '34'
        -
          macro: '{$HEALTH_WARN_STATUS:"diagnosticsFailed"}'
          value: '204'
        -
          macro: '{$HEALTH_WARN_STATUS:"powerProblem"}'
          value: '62'
        -
          macro: '{$HEALTH_WARN_STATUS:"testFailed"}'
          value: '35'
        -
          macro: '{$HEALTH_WARN_STATUS:"thermalProblem"}'
          value: '60'
        -
          macro: '{$HEALTH_WARN_STATUS:"voltageProblem"}'
          value: '62'
        -
          macro: '{$PSU_CRIT_STATUS:"inoperable"}'
          value: '2'
        -
          macro: '{$PSU_WARN_STATUS:"degraded"}'
          value: '3'
        -
          macro: '{$TEMP_CRIT}'
          value: '60'
        -
          macro: '{$TEMP_CRIT:"Ambient"}'
          value: '35'
        -
          macro: '{$TEMP_CRIT_LOW}'
          value: '5'
        -
          macro: '{$TEMP_WARN}'
          value: '50'
        -
          macro: '{$TEMP_WARN:"Ambient"}'
          value: '30'
        -
          macro: '{$VDISK_OK_STATUS:"equipped"}'
          value: '10'
      valuemaps:
        -
          uuid: e1686896f31e483f9add962dbbd90afb
          name: 'CISCO-UNIFIED-COMPUTING-TC-MIB::CucsEquipmentOperability'
          mappings:
            -
              value: '0'
              newvalue: unknown
            -
              value: '1'
              newvalue: operable
            -
              value: '2'
              newvalue: inoperable
            -
              value: '3'
              newvalue: degraded
            -
              value: '4'
              newvalue: poweredOff
            -
              value: '5'
              newvalue: powerProblem
            -
              value: '6'
              newvalue: removed
            -
              value: '7'
              newvalue: voltageProblem
            -
              value: '8'
              newvalue: thermalProblem
            -
              value: '9'
              newvalue: performanceProblem
            -
              value: '10'
              newvalue: accessibilityProblem
            -
              value: '11'
              newvalue: identityUnestablishable
            -
              value: '12'
              newvalue: biosPostTimeout
            -
              value: '13'
              newvalue: disabled
            -
              value: '14'
              newvalue: malformedFru
            -
              value: '15'
              newvalue: backplanePortProblem
            -
              value: '16'
              newvalue: chassisIntrusion
            -
              value: '51'
              newvalue: fabricConnProblem
            -
              value: '52'
              newvalue: fabricUnsupportedConn
            -
              value: '81'
              newvalue: config
            -
              value: '82'
              newvalue: equipmentProblem
            -
              value: '83'
              newvalue: decomissioning
            -
              value: '84'
              newvalue: chassisLimitExceeded
            -
              value: '100'
              newvalue: notSupported
            -
              value: '101'
              newvalue: discovery
            -
              value: '102'
              newvalue: discoveryFailed
            -
              value: '103'
              newvalue: identify
            -
              value: '104'
              newvalue: postFailure
            -
              value: '105'
              newvalue: upgradeProblem
            -
              value: '106'
              newvalue: peerCommProblem
            -
              value: '107'
              newvalue: autoUpgrade
            -
              value: '108'
              newvalue: linkActivateBlocked
        -
          uuid: 5055674c42a241e3a2156de1dc1715bf
          name: 'CISCO-UNIFIED-COMPUTING-TC-MIB::CucsEquipmentPresence'
          mappings:
            -
              value: '0'
              newvalue: unknown
            -
              value: '1'
              newvalue: empty
            -
              value: '10'
              newvalue: equipped
            -
              value: '11'
              newvalue: missing
            -
              value: '12'
              newvalue: mismatch
            -
              value: '13'
              newvalue: equippedNotPrimary
            -
              value: '14'
              newvalue: equippedSlave
            -
              value: '15'
              newvalue: mismatchSlave
            -
              value: '16'
              newvalue: missingSlave
            -
              value: '20'
              newvalue: equippedIdentityUnestablishable
            -
              value: '21'
              newvalue: mismatchIdentityUnestablishable
            -
              value: '22'
              newvalue: equippedWithMalformedFru
            -
              value: '30'
              newvalue: inaccessible
            -
              value: '40'
              newvalue: unauthorized
            -
              value: '100'
              newvalue: notSupported
            -
              value: '101'
              newvalue: equippedUnsupported
            -
              value: '102'
              newvalue: equippedDiscNotStarted
            -
              value: '103'
              newvalue: equippedDiscInProgress
            -
              value: '104'
              newvalue: equippedDiscError
            -
              value: '105'
              newvalue: equippedDiscUnknown
        -
          uuid: 398aa5bf5eb44a8c8dd96babd98f1bd3
          name: 'CISCO-UNIFIED-COMPUTING-TC-MIB::CucsLsOperState'
          mappings:
            -
              value: '0'
              newvalue: indeterminate
            -
              value: '1'
              newvalue: unassociated
            -
              value: '10'
              newvalue: ok
            -
              value: '11'
              newvalue: discovery
            -
              value: '12'
              newvalue: config
            -
              value: '13'
              newvalue: unconfig
            -
              value: '14'
              newvalue: powerOff
            -
              value: '15'
              newvalue: restart
            -
              value: '20'
              newvalue: maintenance
            -
              value: '21'
              newvalue: test
            -
              value: '29'
              newvalue: computeMismatch
            -
              value: '30'
              newvalue: computeFailed
            -
              value: '31'
              newvalue: degraded
            -
              value: '32'
              newvalue: discoveryFailed
            -
              value: '33'
              newvalue: configFailure
            -
              value: '34'
              newvalue: unconfigFailed
            -
              value: '35'
              newvalue: testFailed
            -
              value: '36'
              newvalue: maintenanceFailed
            -
              value: '40'
              newvalue: removed
            -
              value: '41'
              newvalue: disabled
            -
              value: '50'
              newvalue: inaccessible
            -
              value: '60'
              newvalue: thermalProblem
            -
              value: '61'
              newvalue: powerProblem
            -
              value: '62'
              newvalue: voltageProblem
            -
              value: '63'
              newvalue: inoperable
            -
              value: '101'
              newvalue: decomissioning
            -
              value: '201'
              newvalue: biosRestore
            -
              value: '202'
              newvalue: cmosReset
            -
              value: '203'
              newvalue: diagnostics
            -
              value: '204'
              newvalue: diagnosticsFailed
            -
              value: '210'
              newvalue: pendingReboot
            -
              value: '211'
              newvalue: pendingReassociation
            -
              value: '212'
              newvalue: svnicNotPresent
        -
          uuid: 7d3e38476c894ae59ecac6640b24f833
          name: 'CISCO-UNIFIED-COMPUTING-TC-MIB::CucsStorageLunType'
          mappings:
            -
              value: '0'
              newvalue: unspecified
            -
              value: '1'
              newvalue: simple
            -
              value: '2'
              newvalue: mirror
            -
              value: '3'
              newvalue: stripe
            -
              value: '4'
              newvalue: raid
            -
              value: '5'
              newvalue: stripeParity
            -
              value: '6'
              newvalue: stripeDualParity
            -
              value: '7'
              newvalue: mirrorStripe
            -
              value: '8'
              newvalue: stripeParityStripe
            -
              value: '9'
              newvalue: stripeDualParityStripe
        -
          uuid: 9b7c7078039c4e348ab417da71b96f5c
          name: 'CISCO-UNIFIED-COMPUTING-TC-MIB::CucsStoragePDriveStatus'
          mappings:
            -
              value: '0'
              newvalue: unknown
            -
              value: '1'
              newvalue: online
            -
              value: '2'
              newvalue: unconfiguredGood
            -
              value: '3'
              newvalue: globalHotSpare
            -
              value: '4'
              newvalue: dedicatedHotSpare
            -
              value: '5'
              newvalue: jbod
            -
              value: '6'
              newvalue: offline
            -
              value: '7'
              newvalue: rebuilding
            -
              value: '8'
              newvalue: copyback
            -
              value: '9'
              newvalue: failed
            -
              value: '10'
              newvalue: unconfiguredBad
            -
              value: '11'
              newvalue: predictiveFailure
            -
              value: '12'
              newvalue: disabledForRemoval
            -
              value: '13'
              newvalue: foreignConfiguration
            -
              value: '14'
              newvalue: zeroing
            -
              value: '15'
              newvalue: good
            -
              value: '16'
              newvalue: bad
            -
              value: '17'
              newvalue: lockedForeignConfiguration
