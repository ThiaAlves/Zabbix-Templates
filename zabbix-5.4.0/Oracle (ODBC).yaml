zabbix_export:
  version: '5.4'
  date: '2021-05-28T02:57:59Z'
  groups:
    -
      uuid: 748ad4d098d447d492bb935c907f652f
      name: Templates/Databases
  templates:
    -
      uuid: 00ade9277d7c41e8b57d638b22d54372
      template: 'Oracle by ODBC'
      name: 'Oracle by ODBC'
      description: |
        1. Create an Oracle user for monitoring.
        
        2. Set the user name and password in host macros ({$ORACLE.USER} and {$ORACLE.PASSWORD}).
          Do not forget to install the Microsoft ODBC driver on the Zabbix server or the Zabbix proxy.
          See Oracle documentation for instructions: https://www.oracle.com/database/technologies/releasenote-odbc-ic.html.
        
          Note! Credentials in the odbc.ini do not work for Oracle.
          Note! Be sure that ODBC connects to Oracle with session parameter NLS_NUMERIC_CHARACTERS= '.,' It is important for correct display float numbers in Zabbix.
        The "Service's TCP port state" item uses {HOST.CONN} and {$ORACLE.PORT} macros to check the availability of the listener.
        
        
        Template tooling version used: 0.38
      groups:
        -
          name: Templates/Databases
      items:
        -
          uuid: 1a6e01f90dca47459975632c14ce5a39
          name: 'Oracle: Get archive log info'
          type: ODBC
          key: 'db.odbc.get[get_archivelog_stat,"{$ORACLE.DSN}"]'
          delay: 5m
          history: '0'
          trends: '0'
          value_type: TEXT
          params: |
            SELECT
            d.dest_name, DECODE (d.status, 'VALID',3, 'DEFERRED', 2, 'ERROR', 1, 0) AS status,
            d.log_sequence,
            d.error
            FROM v$archive_dest d , v$database db
            WHERE d.status != 'INACTIVE' AND db.log_mode = 'ARCHIVELOG';
          username: '{$ORACLE.USER}'
          password: '{$ORACLE.PASSWORD}'
          tags:
            -
              tag: Application
              value: 'Zabbix raw items'
        -
          uuid: 63fad55a2ced487aa30017b33bf1692e
          name: 'Oracle: Get ASM stats'
          type: ODBC
          key: 'db.odbc.get[get_asm_stat,"{$ORACLE.DSN}"]'
          history: '0'
          trends: '0'
          value_type: TEXT
          params: |
            SELECT
            name AS dg_name,
            ROUND(total_mb / DECODE(TYPE, 'NORMAL', 2, 'HIGH', 3, 'EXTERN', 1)*1024*1024) AS size_byte,
            ROUND(usable_file_mb*1024*1024 ) AS free_size_byte,
            ROUND(100-(usable_file_mb /(total_mb / DECODE(TYPE, 'NORMAL', 2, 'HIGH', 3, 'EXTERN', 1)))* 100, 2) AS used_percent
            FROM v$asm_diskgroup ;
          username: '{$ORACLE.USER}'
          password: '{$ORACLE.PASSWORD}'
          description: 'Get ASM disk groups stats.'
          tags:
            -
              tag: Application
              value: 'Zabbix raw items'
        -
          uuid: 5de7c786988d49d0b50f28d2d622db62
          name: 'Oracle: Get CDB and No-CDB info'
          type: ODBC
          key: 'db.odbc.get[get_cdb_info,"{$ORACLE.DSN}"]'
          history: '0'
          trends: '0'
          value_type: TEXT
          params: |
            SELECT name as DBNAME,
            DECODE(open_mode, 'MOUNTED', 1, 'READ ONLY', 2, 'READ WRITE', 3, 'READ ONLY WITH APPLY', 4, 'MIGRATE', 5, 0) AS open_mode,
            DECODE(database_role, 'SNAPSHOT STANDBY', 1, 'LOGICAL STANDBY', 2, 'PHYSICAL STANDBY', 3, 'PRIMARY', 4, 'FAR SYNC', 5, 0) AS ROLE,
            DECODE(force_logging, 'YES',1,'NO',0,0) AS force_logging,
            DECODE(log_mode, 'MANUAL',2 ,'ARCHIVELOG',1,'NOARCHIVELOG',0,0) AS log_mode
            FROM v$database
          username: '{$ORACLE.USER}'
          password: '{$ORACLE.PASSWORD}'
          description: 'Get info about CDB and  No-CDB databases on instansce.'
          tags:
            -
              tag: Application
              value: 'Zabbix raw items'
        -
          uuid: dde19b79507648bd80a82a0575bf8671
          name: 'Oracle: Get instance state'
          type: ODBC
          key: 'db.odbc.get[get_instance_state,"{$ORACLE.DSN}"]'
          history: '0'
          trends: '0'
          value_type: TEXT
          params: |
            SELECT
            INSTANCE_NAME,
            HOST_NAME,
            VERSION || '-' || EDITION AS VERSION,
            floor((SYSDATE - startup_time)*60*60*24) AS UPTIME,
            decode(status,'STARTED',1,'MOUNTED',2,'OPEN',3,'OPEN MIGRATE',4, 0) AS STATUS,
            decode(archiver,'STOPPED',1,'STARTED',2,'FAILED',3, 0) AS  ARCHIVER,
            decode(instance_role,'PRIMARY_INSTANCE',1,'SECONDARY_INSTANCE',2, 0) AS  INSTANCE_ROLE
            FROM v$instance;
          username: '{$ORACLE.USER}'
          password: '{$ORACLE.PASSWORD}'
          description: 'The item gets state of the current instance.'
          tags:
            -
              tag: Application
              value: 'Zabbix raw items'
        -
          uuid: cedcebd0b7ce474c9681022fcc75df1c
          name: 'Oracle: Get PDB info'
          type: ODBC
          key: 'db.odbc.get[get_pdb_info,"{$ORACLE.DSN}"]'
          history: '0'
          trends: '0'
          value_type: TEXT
          params: |
            SELECT
            name as DBNAME,
            DECODE(open_mode, 'MOUNTED', 1, 'READ ONLY', 2, 'READ WRITE', 3, 'READ ONLY WITH APPLY', 4, 'MIGRATE', 5, 0) AS open_mode
            FROM v$pdbs;
          username: '{$ORACLE.USER}'
          password: '{$ORACLE.PASSWORD}'
          description: 'Get info about PDB databases on instansce.'
          tags:
            -
              tag: Application
              value: 'Zabbix raw items'
        -
          uuid: 3839683749974cdeafd9178bdccb38d6
          name: 'Oracle: Get system metrics'
          type: ODBC
          key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          delay: 0;m0-59
          history: '0'
          trends: '0'
          value_type: TEXT
          params: |
            SELECT 'SYS::' || METRIC_NAME AS METRIC, ROUND(VALUE,3) as VALUE
             FROM V$SYSMETRIC WHERE GROUP_ID = 2
            UNION
              SELECT 'SYSPARAM::' || INITCAP(NAME) AS METRIC, to_number(VALUE)
              FROM V$SYSTEM_PARAMETER WHERE NAME IN ('sessions', 'processes', 'db_files')
            UNION
             SELECT 'SESSION::Long time locked' ,count(*) FROM V$SESSION s WHERE s.BLOCKING_SESSION IS NOT NULL AND s.BLOCKING_SESSION_STATUS='VALID' AND s.SECONDS_IN_WAIT > {$ORACLE.SESSION.LOCK.MAX.TIME}
            UNION
            SELECT 'SESSION::Lock rate' ,(cnt_block / cnt_all)* 100 pct
            FROM ( SELECT COUNT(*) cnt_block FROM v$session WHERE blocking_session IS NOT NULL), ( SELECT COUNT(*) cnt_all FROM v$session)
            UNION
              SELECT 'SESSION::Long time locked' ,count(*) FROM V$SESSION s WHERE s.BLOCKING_SESSION IS NOT NULL AND s.BLOCKING_SESSION_STATUS='VALID' AND s.SECONDS_IN_WAIT > {$ORACLE.SESSION.LOCK.MAX.TIME}
            UNION
             SELECT 'SESSION::Total', COUNT(*) AS VALUE FROM V$SESSION
            UNION
            SELECT 'SESSION::Concurrency rate', NVL(ROUND(SUM(duty_act.cnt*100 / num_cores.val)), 0)
            FROM
            ( SELECT DECODE(session_state, 'ON CPU', 'CPU', wait_class) wait_class, ROUND(COUNT(*)/(60 * 15), 1) cnt
            FROM v$active_session_history sh
            WHERE sh.sample_time >= SYSDATE - 15 / 1440 AND DECODE(session_state, 'ON CPU', 'CPU', wait_class) IN('Concurrency')
            GROUP BY DECODE(session_state, 'ON CPU', 'CPU', wait_class)) duty_act,
            ( SELECT SUM(value) val FROM v$osstat WHERE stat_name = 'NUM_CPU_CORES') num_cores
            UNION
             SELECT 'PGA::' || INITCAP(NAME), VALUE FROM V$PGASTAT
            UNION
             SELECT 'FRA::Space Limit' AS METRIC, space_limit AS VALUE FROM V$RECOVERY_FILE_DEST
            UNION
             SELECT 'FRA::Space Used', space_used AS VALUE FROM V$RECOVERY_FILE_DEST
            UNION
             SELECT 'FRA::Space Reclaimable', space_reclaimable AS VALUE FROM V$RECOVERY_FILE_DEST
            UNION
             SELECT 'FRA::Number Of Files', number_of_files AS VALUE FROM V$RECOVERY_FILE_DEST
            UNION
             SELECT 'FRA::Usable Pct', DECODE(space_limit, 0, 0,(100-(100 *(space_used-space_reclaimable)/ space_limit))) AS VALUE FROM V$RECOVERY_FILE_DEST
            UNION
             SELECT 'FRA::Restore Point', COUNT(*) AS VALUE FROM V$RESTORE_POINT
            UNION
             SELECT 'PROC::Procnum', COUNT(*) FROM v$process
            UNION
             SELECT 'DATAFILE::Count', COUNT(*) FROM v$datafile
            UNION
             SELECT 'SGA::' || INITCAP(pool), SUM(bytes) FROM V$SGASTAT
             WHERE pool IN ( 'java pool', 'large pool' ) GROUP BY pool
            UNION
             SELECT 'SGA::Shared Pool', SUM(bytes) FROM V$SGASTAT
             WHERE pool = 'shared pool' AND name NOT IN ('library cache', 'dictionary cache', 'free memory', 'sql area')
            UNION
             SELECT 'SGA::' || INITCAP(name), bytes FROM V$SGASTAT
             WHERE pool IS NULL AND name IN ('log_buffer', 'fixed_sga')
            UNION
             SELECT 'SGA::Buffer_Cache', SUM(bytes) FROM V$SGASTAT
             WHERE pool IS NULL AND name IN ('buffer_cache', 'db_block_buffers')
            UNION
             SELECT 'REDO::Available', count(*) from v$log t where t.status in ('INACTIVE', 'UNUSED')
            UNION
             SELECT 'USER::Expire password', ROUND(DECODE(SIGN(NVL(u.expiry_date, SYSDATE + 999) - SYSDATE),-1, 0, NVL(u.expiry_date, SYSDATE + 999) - SYSDATE)) exp_passwd_days_before
            FROM dba_users u WHERE username = UPPER('{$ORACLE.USER}');
          username: '{$ORACLE.USER}'
          password: '{$ORACLE.PASSWORD}'
          description: 'The item gets system metric values.'
          tags:
            -
              tag: Application
              value: 'Zabbix raw items'
        -
          uuid: 972be2e777e44c539d0ddd7918b79e88
          name: 'Oracle: Get tablespaces stats'
          type: ODBC
          key: 'db.odbc.get[tablespace_stats,"{$ORACLE.DSN}"]'
          history: '0'
          trends: '0'
          value_type: TEXT
          params: |
            SELECT
            df.tablespace_name AS tablespace,
            df.type AS TYPE,
            SUM(df.bytes) AS used_bytes,
            SUM(df.max_bytes) AS max_bytes,
            SUM(f.free) AS free_bytes,
            ROUND(SUM(df.bytes)/ SUM(df.max_bytes)* 100, 2) AS used_pct,
            DECODE(df.status, 'ONLINE', 1, 'OFFLINE', 2, 'READ ONLY', 3, 0) AS status
            FROM ( SELECT
               ddf.file_id,
               dt.contents AS TYPE,
               dt.STATUS ,
               ddf.file_name,
               ddf.tablespace_name,
               TRUNC(ddf.bytes) AS bytes,
               TRUNC(GREATEST(ddf.bytes, ddf.maxbytes)) AS max_bytes
               FROM
                dba_data_files ddf,
                dba_tablespaces dt
              WHERE
               ddf.tablespace_name = dt.tablespace_name ) df,
               ( SELECT TRUNC(SUM(bytes)) AS FREE, file_id FROM dba_free_space GROUP BY file_id ) f
               WHERE df.file_id = f.file_id (+)
               GROUP BY df.tablespace_name, df.TYPE, df.status
            UNION ALL
            SELECT
               Y.name AS tablespace_name,
               Y.type AS TYPE,
               SUM(Y.bytes) AS bytes,
               SUM(Y.max_bytes) AS max_bytes,
               MAX(NVL(Y.free_bytes, 0)) AS FREE,
               ROUND(SUM(Y.bytes)/ SUM(Y.max_bytes)* 100, 2) AS used_pct,
               DECODE(Y.tbs_status, 'ONLINE', 1, 'OFFLINE', 2, 'READ ONLY', 3, 0) AS status
               FROM ( SELECT
                 dtf.tablespace_name AS name,
                 dt.contents AS TYPE,
                 dt.STATUS AS tbs_status,
                 dtf.status AS status,
                 dtf.bytes AS bytes,
                 (SELECT
                   ((f.total_blocks - s.tot_used_blocks)* vp.value)
                   FROM ( SELECT tablespace_name, SUM(used_blocks) tot_used_blocks FROM gv$sort_segment
                      WHERE tablespace_name != 'DUMMY'
                      GROUP BY tablespace_name) s,
                 ( SELECT tablespace_name, SUM(blocks) total_blocks FROM dba_temp_files
                   WHERE tablespace_name != 'DUMMY'
                   GROUP BY tablespace_name) f,
                 ( SELECT value FROM v$parameter WHERE name = 'db_block_size') vp
               WHERE
                 f.tablespace_name = s.tablespace_name
                 AND f.tablespace_name = dtf.tablespace_name ) AS free_bytes,
                 CASE WHEN dtf.maxbytes = 0 THEN dtf.bytes
                 ELSE dtf.maxbytes END AS max_bytes
               FROM
                sys.dba_temp_files dtf,
                sys.dba_tablespaces dt
               WHERE
               dtf.tablespace_name = dt.tablespace_name ) Y
               GROUP BY Y.name, Y.TYPE, Y.tbs_status ORDER BY tablespace;
          username: '{$ORACLE.USER}'
          password: '{$ORACLE.PASSWORD}'
          description: 'Get tablespaces stats.'
          tags:
            -
              tag: Application
              value: 'Zabbix raw items'
        -
          uuid: 7ee99dfbd8dd4048bc2867aaa2fc335e
          name: 'Oracle: Service''s TCP port state'
          key: 'net.tcp.service[tcp,{HOST.CONN},{$ORACLE.PORT}]'
          delay: 30s
          history: 7d
          description: 'Test the availability of Oracle on TCP port.'
          valuemap:
            name: 'Service state'
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 10m
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: 6b6ce717919e45df93015a8f65337055
          name: 'Oracle: Active parallel sessions'
          type: DEPENDENT
          key: oracle.active_parallel_sessions
          delay: '0'
          history: 7d
          value_type: FLOAT
          description: 'The number of active parallel sessions.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::Active Parallel Sessions'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: 928b095ffe57404eb6863b06b466524d
          name: 'Oracle: Active serial sessions'
          type: DEPENDENT
          key: oracle.active_serial_sessions
          delay: '0'
          history: 7d
          value_type: FLOAT
          description: 'The number of active serial sessions.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::Active Serial Sessions'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: 70633c6c4e27410dabcf035dd583f820
          name: 'Oracle: Average active sessions'
          type: DEPENDENT
          key: oracle.active_sessions
          delay: '0'
          history: 7d
          value_type: FLOAT
          description: 'The average active sessions at a point in time. It is the number of sessions that are either working or waiting.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::Average Active Sessions'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: eb9f4179a87249fc9df9989f58502a12
          name: 'Oracle: Archiver state'
          type: DEPENDENT
          key: oracle.archiver_state
          delay: '0'
          history: 7d
          description: 'Automatic archiving status.'
          valuemap:
            name: 'Oracle archiver state'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $..ARCHIVER.first()
          master_item:
            key: 'db.odbc.get[get_instance_state,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: 836e01f5247a468dbf1866a744979376
          name: 'Oracle: Buffer cache hit ratio'
          type: DEPENDENT
          key: oracle.buffer_cache_hit_ratio
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: '%'
          description: 'Ratio of buffer cache hits. (LogRead - PhyRead)/LogRead'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::Buffer Cache Hit Ratio'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: dedafce88267427a8f0b51d74de28c58
          name: 'Oracle: Global cache blocks corrupted'
          type: DEPENDENT
          key: oracle.cache_blocks_corrupt
          delay: '0'
          history: 7d
          description: 'The number of blocks that encountered a corruption or checksum failure during interconnect.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::Global Cache Blocks Corrupted'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: d0d0dbbf1869487d957e60d03e8e3512
          name: 'Oracle: Global cache blocks lost'
          type: DEPENDENT
          key: oracle.cache_blocks_lost
          delay: '0'
          history: 7d
          description: 'The number of global cache blocks lost'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::Global Cache Blocks Lost'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: 50ea6f52e01c44e5b9039add026faaa2
          name: 'Oracle: Cursor cache hit ratio'
          type: DEPENDENT
          key: oracle.cursor_cache_hit_ratio
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: '%'
          description: 'Ratio of cursor cache hits. CursorCacheHit/SoftParse'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::Cursor Cache Hit Ratio'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: 82228fbb70bf4660aa64bdde2f57686d
          name: 'Oracle: Database CPU time ratio'
          type: DEPENDENT
          key: oracle.database_cpu_time_ratio
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: '%'
          description: 'Calculated by dividing the total CPU used by the database by the Oracle time model statistic DB time.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::Database CPU Time Ratio'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: 877272b0b9424d279b1efaa6536eb19b
          name: 'Oracle: Database wait time ratio'
          type: DEPENDENT
          key: oracle.database_wait_time_ratio
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: '%'
          description: 'Wait time: the time that the server process spends waiting for available shared resources (to be released by other server processes) such as latches, locks, data buffers, and so on'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::Database Wait Time Ratio'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: 751fe010337e40a5a12fc24d327ffcee
          name: 'Oracle: Datafiles count'
          type: DEPENDENT
          key: oracle.db_files_count
          delay: '0'
          history: 7d
          description: 'Current number of datafile.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''DATAFILE::Count'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: a0e263bf207042058b5d9d2e735e05eb
          name: 'Oracle: Datafiles limit'
          type: DEPENDENT
          key: oracle.db_files_limit
          delay: '0'
          history: 7d
          description: 'Max allowable number of  datafile.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYSPARAM::Db_Files'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: 22d9cccf44924f99aaf444c80b3beab9
          name: 'Oracle: Disk sort per second'
          type: DEPENDENT
          key: oracle.disk_sorts
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: Rps
          description: 'The number of sorts going to disk per second'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::Disk Sort Per Sec'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: 46e0598b703a412e96a3b18e2248e754
          name: 'Oracle: Enqueue timeouts per second'
          type: DEPENDENT
          key: oracle.enqueue_timeouts_rate
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: Rps
          description: 'Enqueue timeouts per second.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::Enqueue Timeouts Per Sec'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: beca246cadb44e48a20bc8809624a6f4
          name: 'Oracle: FRA, Number of files'
          type: DEPENDENT
          key: oracle.fra_number_of_files
          delay: '0'
          history: 7d
          description: 'Number of files in the fast recovery area'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''FRA::Number Of Files'')].VALUE.first()'
              error_handler: CUSTOM_VALUE
              error_handler_params: '0'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: 61eb041ea3b349df88cb3495b383fbe4
          name: 'Oracle: FRA, Number of restore points'
          type: DEPENDENT
          key: oracle.fra_restore_point
          delay: '0'
          history: 7d
          value_type: FLOAT
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''FRA::Restore Point'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: 375e094a1a024a19b8e69e4f362c0163
          name: 'Oracle: FRA, Space limit'
          type: DEPENDENT
          key: oracle.fra_space_limit
          delay: '0'
          history: 7d
          units: B
          description: 'Maximum amount of disk space (in bytes) that the database can use for the fast recovery area.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''FRA::Space Limit'')].VALUE.first()'
              error_handler: CUSTOM_VALUE
              error_handler_params: '0'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: 4028e389cc9e4b24946657f1ded1ba47
          name: 'Oracle: FRA, Space reclaimable'
          type: DEPENDENT
          key: oracle.fra_space_reclaimable
          delay: '0'
          history: 7d
          units: B
          description: 'Total amount of disk space (in bytes) that can be created by deleting obsolete, redundant, and other low priority files from the fast recovery area.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''FRA::Space Reclaimable'')].VALUE.first()'
              error_handler: CUSTOM_VALUE
              error_handler_params: '0'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: 40b03e917c3c4c0385536336e48affcb
          name: 'Oracle: FRA, Used space'
          type: DEPENDENT
          key: oracle.fra_space_used
          delay: '0'
          history: 7d
          units: B
          description: 'Amount of disk space (in bytes) used by fast recovery area files created in current and all previous fast recovery areas.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''FRA::Space Used'')].VALUE.first()'
              error_handler: CUSTOM_VALUE
              error_handler_params: '0'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: b29c93eecf9d4d1b8c5de1ce9721801f
          name: 'Oracle: FRA, Used space in %'
          type: DEPENDENT
          key: oracle.fra_usable_pct
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: '%'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''FRA::Usable Pct'')].VALUE.first()'
              error_handler: CUSTOM_VALUE
              error_handler_params: '0'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: 3243beb0fe70425f8d71938a52f765ae
          name: 'Oracle: GC CR block received per second'
          type: DEPENDENT
          key: oracle.gc_cr_block_received_rate
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: Rps
          description: 'GC CR block received per second.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::GC CR Block Received Per Second'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: cc3c9200deed42e5a8e187e82c123009
          name: 'Oracle: Instance role'
          type: DEPENDENT
          key: oracle.instance.role
          delay: '0'
          history: 7d
          description: 'Indicates whether the instance is an active instance or an inactive secondary instance.'
          valuemap:
            name: 'Oracle instance role'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $..INSTANCE_ROLE.first()
          master_item:
            key: 'db.odbc.get[get_instance_state,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: 3da27d558e034236a42b3b94bfa13159
          name: 'Oracle: Instance hostname'
          type: DEPENDENT
          key: oracle.instance_hostname
          delay: '0'
          history: 7d
          trends: '0'
          value_type: CHAR
          description: 'Name of the host machine.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $..HOST_NAME.first()
          master_item:
            key: 'db.odbc.get[get_instance_state,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
          triggers:
            -
              uuid: 618a3e3c82dc4ccba82477afdd100a98
              expression: '(last(/Oracle by ODBC/oracle.instance_hostname,#1)<>last(/Oracle by ODBC/oracle.instance_hostname,#2))=1 and length(last(/Oracle by ODBC/oracle.instance_hostname))>0'
              name: 'Oracle: Instance hostname has changed (new hostname received: {ITEM.VALUE})'
              priority: INFO
              description: |
                Oracle DB Instance hostname has changed. Ack to close.
                Last value: {ITEM.LASTVALUE1}.
              manual_close: 'YES'
        -
          uuid: 4e5df3339a2940c6b3cdad6f5b65234b
          name: 'Oracle: Instance name'
          type: DEPENDENT
          key: oracle.instance_name
          delay: '0'
          history: 7d
          trends: '0'
          value_type: CHAR
          description: 'Name of the instance.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $..INSTANCE_NAME.first()
          master_item:
            key: 'db.odbc.get[get_instance_state,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
          triggers:
            -
              uuid: 2fe53d1d931e4eb38fef10a3171c1665
              expression: '(last(/Oracle by ODBC/oracle.instance_name,#1)<>last(/Oracle by ODBC/oracle.instance_name,#2))=1 and length(last(/Oracle by ODBC/oracle.instance_name))>0'
              name: 'Oracle: Instance name has changed (new name received: {ITEM.VALUE})'
              priority: INFO
              description: |
                Oracle DB Instance name has changed. Ack to close.
                Last value: {ITEM.LASTVALUE1}.
              manual_close: 'YES'
        -
          uuid: 632a953eead74114bdaf640bbf5929a5
          name: 'Oracle: Instance status'
          type: DEPENDENT
          key: oracle.instance_status
          delay: '0'
          history: 7d
          description: 'Status of the instance.'
          valuemap:
            name: 'Oracle instance status'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $..STATUS.first()
          master_item:
            key: 'db.odbc.get[get_instance_state,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: 9a3084287a354fb0b0eb5de377a6de92
          name: 'Oracle: Library cache hit ratio'
          type: DEPENDENT
          key: oracle.library_cache_hit_ratio
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: '%'
          description: 'Ratio of library cache hits. Hits/Pins'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::Library Cache Hit Ratio'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: ac44884b2518485eae4bc7caf46799a8
          name: 'Oracle: Logons per second'
          type: DEPENDENT
          key: oracle.logons_rate
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: Rps
          description: 'The number of logon attempts.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::Logons Per Sec'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: f7691a5d7ef74a4d99cac61835052fba
          name: 'Oracle: Long table scans per second'
          type: DEPENDENT
          key: oracle.long_table_scans_rate
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: Rps
          description: 'The number of long table scans per second. A table is considered ''long'' if the table is not cached and if its high-water mark is greater than 5 blocks.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::Long Table Scans Per Sec'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: 49445baea18640ea844f869c51aee565
          name: 'Oracle: Memory sorts ratio'
          type: DEPENDENT
          key: oracle.memory_sorts_ratio
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: '%'
          description: 'The percentage of sorts (from ORDER BY clauses or index building) that are done to disk vs in-memory.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::Memory Sorts Ratio'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: 786188c7719048cb863450f98ab921ac
          name: 'Oracle: PGA, Global memory bound'
          type: DEPENDENT
          key: oracle.pga_global_bound
          delay: '0'
          history: 7d
          units: B
          description: 'Maximum size of a work area executed in automatic mode.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''PGA::Global Memory Bound'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: 1f532b6599f34db285b60a8879638d75
          name: 'Oracle: PGA, Aggregate target parameter'
          type: DEPENDENT
          key: oracle.pga_target
          delay: '0'
          history: 7d
          units: B
          description: 'Current value of the PGA_AGGREGATE_TARGET initialization parameter. If this parameter is not set, then its value is 0 and automatic management of PGA memory is disabled.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''PGA::Aggregate Pga Target Parameter'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: 001bf0d526cb455386f5a63e6bb8f410
          name: 'Oracle: Physical reads per second'
          type: DEPENDENT
          key: oracle.physical_reads_rate
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: Rps
          description: 'Reads per second.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::Physical Reads Per Sec'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: 2f305e09eafd4f7a9360f138be20a631
          name: 'Oracle: Physical reads bytes per second'
          type: DEPENDENT
          key: oracle.physical_read_bytes_rate
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: Bps
          description: 'Read bytes per second.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::Physical Read Bytes Per Sec'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: d20f81d99e6647479abcc9ffcbc208fc
          name: 'Oracle: Physical writes per second'
          type: DEPENDENT
          key: oracle.physical_writes_rate
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: Rps
          description: 'Writes per second.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::Physical Writes Per Sec'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: e2e21384fbae431a88f1eef610b0307b
          name: 'Oracle: Physical writes bytes per second'
          type: DEPENDENT
          key: oracle.physical_write_bytes_rate
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: Bps
          description: 'Write bytes per second.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::Physical Write Bytes Per Sec'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: 533ae91bb94e4077870aa362a8cea7e5
          name: 'Oracle: Number of processes'
          type: DEPENDENT
          key: oracle.processes_count
          delay: '0'
          history: 7d
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''PROC::Procnum'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: 721c04b5f3ba42d0ae7acceb5876c360
          name: 'Oracle: Processes limit'
          type: DEPENDENT
          key: oracle.processes_limit
          delay: '0'
          history: 7d
          description: 'Max user processes.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYSPARAM::Processes'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: 65064008eef54657b7b7f2beeba70b0a
          name: 'Oracle: Redo logs available to switch'
          type: DEPENDENT
          key: oracle.redo_logs_available
          delay: '0'
          history: 7d
          description: 'Number of available for log switching inactive/unused REDO logs.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''REDO::Available'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
          triggers:
            -
              uuid: 1348b1e854e64d34b6b00be118f045c3
              expression: 'max(/Oracle by ODBC/oracle.redo_logs_available,5m) < {$ORACLE.REDO.MIN.WARN}'
              name: 'Oracle: Number of REDO logs available for switching is too low (less {$ORACLE.REDO.MIN.WARN} for 5 min)'
              priority: WARNING
              description: |
                Number of available for log switching inactive/unused REDOs is low (Database down risk)
                Last value: {ITEM.LASTVALUE1}.
        -
          uuid: ab298981f26a4ec6849e1155ce35ee76
          name: 'Oracle: Rows per sort'
          type: DEPENDENT
          key: oracle.rows_per_sort
          delay: '0'
          history: 7d
          value_type: FLOAT
          description: 'The average number of rows per sort for all types of sorts performed.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::Rows Per Sort'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: ddbdd3d7d40d42b9b9711470516a5aec
          name: 'Oracle: SQL service response time'
          type: DEPENDENT
          key: oracle.service_response_time
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: s
          description: 'SQL service response time in seconds.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::SQL Service Response Time'')].VALUE.first()'
            -
              type: MULTIPLIER
              parameters:
                - '0.01'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: e269a27f3c3f47ae86fef231da2a6fce
          name: 'Oracle: Active background sessions'
          type: DEPENDENT
          key: oracle.session_active_background
          delay: '0'
          history: 7d
          value_type: FLOAT
          description: 'The number of active background sessions.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SESSION::Active Background'')].VALUE.first()'
              error_handler: CUSTOM_VALUE
              error_handler_params: '0'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: 6e8defc1e3e2485784d8bef6e2b988c7
          name: 'Oracle: Active user sessions'
          type: DEPENDENT
          key: oracle.session_active_user
          delay: '0'
          history: 7d
          value_type: FLOAT
          description: 'The number of active user sessions.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SESSION::Active User'')].VALUE.first()'
              error_handler: CUSTOM_VALUE
              error_handler_params: '0'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: a3f2b314a6354d238d6604afa2333ae6
          name: 'Oracle: Sessions concurrency'
          type: DEPENDENT
          key: oracle.session_concurrency_rate
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: '%'
          description: 'The percentage of concurrency. Concurrency is a DB behaviour when different transactions request to change the same resource - in case of modifying data transactions sequentially block temporarily the right to change data, the rest of the transactions are waiting for access. In the case when access for resource is locked for a long time, then the concurrency grows (like the transaction queue) and this often has an extremely negative impact on performance. A high contention value does not indicate the root cause of the problem, but is a signal to search for it.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SESSION::Concurrency rate'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
          triggers:
            -
              uuid: 7974669481124f71a4c31d5ac1dbf193
              expression: 'min(/Oracle by ODBC/oracle.session_concurrency_rate,5m) > {$ORACLE.CONCURRENCY.MAX.WARN}'
              name: 'Oracle: Too hight database concurrency (over {$ORACLE.CONCURRENCY.MAX.WARN}% for 5 min)'
              priority: WARNING
              description: |
                Concurrency rate is over {$ORACLE.CONCURRENCY.MAX.WARN}%. A high contention value does not indicate the root cause of the problem, but is a signal to search for it. In the case of high competition, an analysis of resource consumption should be carried out, the most "heavy" queries made in the database, possibly - session tracing. All this will help determine the root cause and possible optimization points both in the database configuration and in the logic of building queries of the application itself.
                Last value: {ITEM.LASTVALUE1}.
        -
          uuid: 3459ae7c82454882a9655db8a83120fd
          name: 'Oracle: Session count'
          type: DEPENDENT
          key: oracle.session_count
          delay: '0'
          history: 7d
          value_type: FLOAT
          description: 'Session count.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SESSION::Total'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: 5abf01d0bad442e7817752ae01dfc2d2
          name: 'Oracle: Inactive user sessions'
          type: DEPENDENT
          key: oracle.session_inactive_user
          delay: '0'
          history: 7d
          value_type: FLOAT
          description: 'The number of inactive user sessions.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SESSION::Inactive User'')].VALUE.first()'
              error_handler: CUSTOM_VALUE
              error_handler_params: '0'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: ebc142a0784041d2bbe982c4d766b98f
          name: 'Oracle: Sessions limit'
          type: DEPENDENT
          key: oracle.session_limit
          delay: '0'
          history: 7d
          description: 'User and system sessions.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYSPARAM::Sessions'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: 64361f8862e8482d86a8bdd71c709142
          name: 'Oracle: Sessions lock rate'
          type: DEPENDENT
          key: oracle.session_lock_rate
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: '%'
          description: 'The percentage of locked sessions. Locks are mechanisms that prevent destructive interaction between transactions accessing the same resource—either user objects such as tables and rows or system objects not visible to users, such as shared data structures in memory and data dictionary rows.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SESSION::Lock rate'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
          triggers:
            -
              uuid: 9a75f3a039094ca89c2ba7e3fa93b1a8
              expression: 'min(/Oracle by ODBC/oracle.session_lock_rate,5m) > {$ORACLE.SESSIONS.LOCK.MAX.WARN}'
              name: 'Oracle: Too many locked sessions (over {$ORACLE.SESSIONS.LOCK.MAX.WARN}% for 5 min)'
              priority: WARNING
              description: |
                Number of locked sessions is over {$ORACLE.SESSIONS.LOCK.MAX.WARN}% of the running sessions.
                Last value: {ITEM.LASTVALUE1}.
        -
          uuid: a9669cb6290b4a158e7f02c1f079b6f9
          name: 'Oracle: Sessions locked over {$ORACLE.SESSION.LOCK.MAX.TIME}s'
          type: DEPENDENT
          key: oracle.session_long_time_locked
          delay: '0'
          history: 7d
          value_type: FLOAT
          description: 'Count of the prolongely locked sessions. (You can change maximum session lock duration in seconds for query by {$ORACLE.SESSION.LOCK.MAX.TIME} macro. Default 600 sec)'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SESSION::Long time locked'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
          triggers:
            -
              uuid: a8f5ec966f5e4c72baad1380eda4d0a2
              expression: 'min(/Oracle by ODBC/oracle.session_long_time_locked,5m) > {$ORACLE.SESSION.LONG.LOCK.MAX.WARN}'
              name: 'Oracle: Too many sessions locked over {$ORACLE.SESSION.LOCK.MAX.TIME}s (over {$ORACLE.SESSION.LONG.LOCK.MAX.WARN} for 5 min)'
              priority: WARNING
              description: |
                Number of sessions locked over {$ORACLE.SESSION.LOCK.MAX.TIME} seconds is too high. Long-term locks can negatively affect database performance, therefore, if they are detected, you should first find the most difficult queries from the database point of view and analyze possible resource leaks.
                Last value: {ITEM.LASTVALUE1}.
        -
          uuid: 94fe3a129f08415bb7e02a862bd9e8a8
          name: 'Oracle: SGA, buffer cache'
          type: DEPENDENT
          key: oracle.sga_buffer_cache
          delay: '0'
          history: 7d
          units: B
          description: 'The size of the cache of standard blocks.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SGA::Buffer_Cache'')].VALUE.first()'
              error_handler: CUSTOM_VALUE
              error_handler_params: '0'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: 062fbd601d6f41208e364c80f1d08b1e
          name: 'Oracle: SGA, fixed'
          type: DEPENDENT
          key: oracle.sga_fixed
          delay: '0'
          history: 7d
          units: B
          description: 'The fixed SGA is an internal housekeeping area.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SGA::Fixed_Sga'')].VALUE.first()'
              error_handler: CUSTOM_VALUE
              error_handler_params: '0'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: 614066ff91e144dbae58b4920c1db932
          name: 'Oracle: SGA, java pool'
          type: DEPENDENT
          key: oracle.sga_java_pool
          delay: '0'
          history: 7d
          units: B
          description: 'Memory is allocated from the java pool.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SGA::Java Pool'')].VALUE.first()'
              error_handler: CUSTOM_VALUE
              error_handler_params: '0'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: 0f726310d4a8426188658f7c093c3989
          name: 'Oracle: SGA, large pool'
          type: DEPENDENT
          key: oracle.sga_large_pool
          delay: '0'
          history: 7d
          units: B
          description: 'Memory is allocated from the large pool.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SGA::Large Pool'')].VALUE.first()'
              error_handler: CUSTOM_VALUE
              error_handler_params: '0'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: 03e9cea3887447349c9116b89b1be026
          name: 'Oracle: SGA, log buffer'
          type: DEPENDENT
          key: oracle.sga_log_buffer
          delay: '0'
          history: 7d
          units: B
          description: 'The number of bytes allocated for the redo log buffer.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SGA::Log_Buffer'')].VALUE.first()'
              error_handler: CUSTOM_VALUE
              error_handler_params: '0'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: eb4c2f63ef8449d99794e5fdb7fed7bf
          name: 'Oracle: SGA, shared pool'
          type: DEPENDENT
          key: oracle.sga_shared_pool
          delay: '0'
          history: 7d
          units: B
          description: 'Memory is allocated from the shared pool.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SGA::Shared Pool'')].VALUE.first()'
              error_handler: CUSTOM_VALUE
              error_handler_params: '0'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: b14b0126cf64436ea206ec151984cd95
          name: 'Oracle: Shared pool free %'
          type: DEPENDENT
          key: oracle.shared_pool_free
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: '%'
          description: 'Shared pool free memory percent. Free/Total'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::Shared Pool Free %'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
          triggers:
            -
              uuid: 8facfa98bcd3447ea53d0a3d09ada933
              expression: 'max(/Oracle by ODBC/oracle.shared_pool_free,5m)<{$ORACLE.SHARED.FREE.MIN.WARN}'
              name: 'Oracle: Shared pool free is too low (less {$ORACLE.SHARED.FREE.MIN.WARN}% for 5m)'
              priority: WARNING
              description: |
                The shared pool free memory percent has been less than {$ORACLE.SHARED.FREE.MIN.WARN}% in the last 5 minutes.
                Last value: {ITEM.LASTVALUE1}.
        -
          uuid: 8b3e958d76d14ef7a6869634106f1277
          name: 'Oracle: Total sorts per user call'
          type: DEPENDENT
          key: oracle.sorts_per_user_call
          delay: '0'
          history: 7d
          value_type: FLOAT
          description: 'Total sorts per user call.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::Total Sorts Per User Call'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: fc2cff59b0804989989179e1dbc338b5
          name: 'Oracle: Temp space used'
          type: DEPENDENT
          key: oracle.temp_space_used
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: B
          description: 'Temp space used.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::Temp Space Used'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: 085c097ab3b34f07b262caf80703b469
          name: 'Oracle: PGA, Total allocated'
          type: DEPENDENT
          key: oracle.total_pga_allocated
          delay: '0'
          history: 7d
          units: B
          description: 'Current amount of PGA memory allocated by the instance. The Oracle Database attempts to keep this number below the value of the PGA_AGGREGATE_TARGET initialization parameter. However, it is possible for the PGA allocated to exceed that value by a small percentage and for a short period of time when the work area workload is increasing very rapidly or when PGA_AGGREGATE_TARGET is set to a small value.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''PGA::Total Pga Allocated'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: c2c18a0a502d4fbe91db25d29ae57d45
          name: 'Oracle: PGA, Total freeable'
          type: DEPENDENT
          key: oracle.total_pga_freeable
          delay: '0'
          history: 7d
          units: B
          description: 'Number of bytes of PGA memory in all processes that could be freed back to the operating system.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''PGA::Total Freeable Pga Memory'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: e0e88ce92ece4ca0b776f09dc4ec5039
          name: 'Oracle: PGA, Total inuse'
          type: DEPENDENT
          key: oracle.total_pga_used
          delay: '0'
          history: 7d
          units: B
          description: 'Indicates how much PGA memory is currently consumed by work areas. This number can be used to determine how much memory is consumed by other consumers of the PGA memory (for example, PL/SQL or Java).'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''PGA::Total Pga Inuse'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: 3c817d2b45fc471aa86771ce1739de6f
          name: 'Oracle: Uptime'
          type: DEPENDENT
          key: oracle.uptime
          delay: '0'
          history: 7d
          trends: 0d
          units: s
          description: 'Oracle instance uptime in seconds.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $..UPTIME.first()
          master_item:
            key: 'db.odbc.get[get_instance_state,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
          triggers:
            -
              uuid: 03a4fb1d6e684c9b82c1317699c71468
              expression: 'nodata(/Oracle by ODBC/oracle.uptime,5m)=1'
              name: 'Oracle: Failed to fetch info data (or no data for 5m)'
              priority: WARNING
              description: |
                Zabbix has not received data for items for the last 5 minutes. The database might be unavailable for connecting.
                Last value: {ITEM.LASTVALUE1}.
              dependencies:
                -
                  name: 'Oracle: Port {$ORACLE.PORT} is unavailable'
                  expression: 'max(/Oracle by ODBC/net.tcp.service[tcp,{HOST.CONN},{$ORACLE.PORT}],#3)=0  and max(/Oracle by ODBC/proc.num[,,,"tnslsnr LISTENER"],#3)>0'
            -
              uuid: 431201a1ce0d47948751c7e4e6bbeb92
              expression: 'last(/Oracle by ODBC/oracle.uptime)<10m'
              name: 'Oracle: has been restarted (uptime < 10m)'
              priority: INFO
              description: |
                Uptime is less than 10 minutes.
                Last value: {ITEM.LASTVALUE1}.
              manual_close: 'YES'
        -
          uuid: ad275dbbe8af483b93d37e416c3f1fd2
          name: 'Oracle: User ''{$ORACLE.USER}'' expire password'
          type: DEPENDENT
          key: oracle.user_expire_password
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: days
          description: 'The number of days before zabbix account password expired.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''USER::Expire password'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
          triggers:
            -
              uuid: a909d8cccacf4470a3e2da88b4e5c3d5
              expression: 'last(/Oracle by ODBC/oracle.user_expire_password)  < {$ORACLE.EXPIRE.PASSWORD.MIN.WARN}'
              name: 'Oracle: Zabbix account will expire soon (under {$ORACLE.EXPIRE.PASSWORD.MIN.WARN} days)'
              priority: WARNING
              description: |
                Password for zabbix user in the database will expire soon.
                Last value: {ITEM.LASTVALUE1}.
        -
          uuid: 3455378f6ecf4ecb93a69d2387e4a57d
          name: 'Oracle: User rollbacks per second'
          type: DEPENDENT
          key: oracle.user_rollbacks_rate
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: Rps
          description: 'The number of times that users manually issue the ROLLBACK statement or an error occurred during a user''s transactions.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::User Rollbacks Per Sec'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
        -
          uuid: 45143cb0d0284608bf48897885a91bbb
          name: 'Oracle: Version'
          type: DEPENDENT
          key: oracle.version
          delay: '0'
          history: 7d
          trends: '0'
          value_type: CHAR
          description: 'Oracle Server version.'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $..VERSION.first()
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          master_item:
            key: 'db.odbc.get[get_instance_state,"{$ORACLE.DSN}"]'
          tags:
            -
              tag: Application
              value: Oracle
          triggers:
            -
              uuid: a5dd4fe627c44afebdfe7beeefc4ec3d
              expression: '(last(/Oracle by ODBC/oracle.version,#1)<>last(/Oracle by ODBC/oracle.version,#2))=1 and length(last(/Oracle by ODBC/oracle.version))>0'
              name: 'Oracle: Version has changed (new version value received: {ITEM.VALUE})'
              priority: INFO
              description: |
                Oracle DB version has changed. Ack to close.
                Last value: {ITEM.LASTVALUE1}.
              manual_close: 'YES'
        -
          uuid: bf89a6ced768432a9cc3c27e1e3159d0
          name: 'Oracle: Number of LISTENER processes'
          key: 'proc.num[,,,"tnslsnr LISTENER"]'
          delay: 30s
          history: 7d
          description: 'Number of LISTENER processes running'
          preprocessing:
            -
              type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 10m
          tags:
            -
              tag: Application
              value: Oracle
          triggers:
            -
              uuid: eb5e531eb3f142569775349a126d1ab0
              expression: 'max(/Oracle by ODBC/proc.num[,,,"tnslsnr LISTENER"],#3)=0'
              name: 'Oracle: LISTENER process is not running'
              priority: DISASTER
              description: 'Last value: {ITEM.LASTVALUE1}.'
      discovery_rules:
        -
          uuid: a527b14b1cee4115be5c5e9387af821b
          name: 'Archive log discovery'
          type: ODBC
          key: 'db.odbc.discovery[archivelog,"{$ORACLE.DSN}"]'
          delay: 1h
          params: |
            SELECT d.dest_name
            FROM v$archive_dest d , v$database db WHERE d.status != 'INACTIVE' AND db.log_mode = 'ARCHIVELOG';
          username: '{$ORACLE.USER}'
          password: '{$ORACLE.PASSWORD}'
          description: 'Log archive destinations.'
          item_prototypes:
            -
              uuid: 06e47a56685e4dd784628c40d5038c88
              name: 'Archivelog ''{#DEST_NAME}'': Error'
              type: DEPENDENT
              key: 'oracle.archivelog_error["{#DEST_NAME}"]'
              delay: '0'
              history: 7d
              trends: '0'
              value_type: TEXT
              description: 'Displays the error text'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$[?(@.DEST_NAME==''{#DEST_NAME}'')].ERROR.first()'
              master_item:
                key: 'db.odbc.get[get_archivelog_stat,"{$ORACLE.DSN}"]'
              tags:
                -
                  tag: Application
                  value: 'Oracle Archivelog'
            -
              uuid: 1948e6bfaa48451cac6ee83a16b07826
              name: 'Archivelog ''{#DEST_NAME}'': Last sequence'
              type: DEPENDENT
              key: 'oracle.archivelog_log_sequence["{#DEST_NAME}"]'
              delay: '0'
              history: 7d
              description: 'Identifies the sequence number of the last archived redo log to be archived'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$[?(@.DEST_NAME==''{#DEST_NAME}'')].LOG_SEQUENCE.first()'
              master_item:
                key: 'db.odbc.get[get_archivelog_stat,"{$ORACLE.DSN}"]'
              tags:
                -
                  tag: Application
                  value: 'Oracle Archivelog'
            -
              uuid: 0d561969fc2942fea854541a03b6a490
              name: 'Archivelog ''{#DEST_NAME}'': Status'
              type: DEPENDENT
              key: 'oracle.archivelog_log_status["{#DEST_NAME}"]'
              delay: '0'
              history: 7d
              description: 'Identifies the current status of the destination: 1 - ''Valid'', 2 - ''Dederred'',3 - ''Error'', 0 - ''Unknown'''
              valuemap:
                name: 'Oracle Archivelog status'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$[?(@.DEST_NAME==''{#DEST_NAME}'')].STATUS.first()'
              master_item:
                key: 'db.odbc.get[get_archivelog_stat,"{$ORACLE.DSN}"]'
              tags:
                -
                  tag: Application
                  value: 'Oracle Archivelog'
              trigger_prototypes:
                -
                  uuid: 1202e75015304115a4ccdab027617816
                  expression: 'last(/Oracle by ODBC/oracle.archivelog_log_status["{#DEST_NAME}"])<2'
                  name: 'Archivelog ''{#DEST_NAME}'': Log Archive is not valid'
                  priority: HIGH
                  description: |
                    ARL destination not in 3 - Valid or 2 - Deferred.
                    Last value: {ITEM.LASTVALUE1}.
        -
          uuid: c40708b755c7464bb064b7bffc584381
          name: 'ASM disk groups discovery'
          type: ODBC
          key: 'db.odbc.discovery[asm,"{$ORACLE.DSN}"]'
          delay: 1h
          params: 'SELECT name AS dg_name FROM v$asm_diskgroup;'
          username: '{$ORACLE.USER}'
          password: '{$ORACLE.PASSWORD}'
          description: 'ASM disk groups'
          item_prototypes:
            -
              uuid: da6116af9f54452ab1694af8eef9f38d
              name: 'ASM ''{#DG_NAME}'': Free size'
              type: DEPENDENT
              key: 'oracle.asm_free_size["{#DG_NAME}"]'
              delay: '0'
              history: 7d
              units: B
              description: 'Free size of ASM disk group.'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$[?(@.DG_NAME==''{#DG_NAME}'')].FREE_SIZE_BYTE.first()'
              master_item:
                key: 'db.odbc.get[get_asm_stat,"{$ORACLE.DSN}"]'
              tags:
                -
                  tag: Application
                  value: 'Oracle ASM'
            -
              uuid: 7f2a51d7eeb64c5b8929dcb0e3a49273
              name: 'ASM ''{#DG_NAME}'': Total size'
              type: DEPENDENT
              key: 'oracle.asm_total_size["{#DG_NAME}"]'
              delay: '0'
              history: 7d
              units: B
              description: 'Total size of ASM disk group.'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$[?(@.DG_NAME==''{#DG_NAME}'')].SIZE_BYTE.first()'
              master_item:
                key: 'db.odbc.get[get_asm_stat,"{$ORACLE.DSN}"]'
              tags:
                -
                  tag: Application
                  value: 'Oracle ASM'
            -
              uuid: 9c87a9089a19468f85eb1d3c28893092
              name: 'ASM ''{#DG_NAME}'': Free size'
              type: DEPENDENT
              key: 'oracle.asm_used_pct["{#DG_NAME}"]'
              delay: '0'
              history: 7d
              value_type: FLOAT
              units: '%'
              description: 'Usage percent of ASM disk group.'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$[?(@.DG_NAME==''{#DG_NAME}'')].USED_PERCENT.first()'
              master_item:
                key: 'db.odbc.get[get_asm_stat,"{$ORACLE.DSN}"]'
              tags:
                -
                  tag: Application
                  value: 'Oracle ASM'
              trigger_prototypes:
                -
                  uuid: 756a8b4b04bc4aadab6b4b4cc856ad32
                  expression: 'min(/Oracle by ODBC/oracle.asm_used_pct["{#DG_NAME}"],5m)>{$ORACLE.ASM.USED.PCT.MAX.HIGH}'
                  name: 'ASM ''{#DG_NAME}'': Disk group usage is too high (over {$ORACLE.ASM.USED.PCT.MAX.HIGH}% for 5m)'
                  priority: HIGH
                  description: |
                    Usage percent of ASM disk group is over {$ORACLE.ASM.USED.PCT.MAX.WARN}.
                    Last value: {ITEM.LASTVALUE1}.
                -
                  uuid: d65971e0f3994dfcbcbde145c9866678
                  expression: 'min(/Oracle by ODBC/oracle.asm_used_pct["{#DG_NAME}"],5m)>{$ORACLE.ASM.USED.PCT.MAX.WARN}'
                  name: 'ASM ''{#DG_NAME}'': Disk group usage is too high (over {$ORACLE.ASM.USED.PCT.MAX.WARN}% for 5m)'
                  priority: WARNING
                  description: |
                    Usage percent of ASM disk group is over {$ORACLE.ASM.USED.PCT.MAX.WARN}.
                    Last value: {ITEM.LASTVALUE1}.
                  dependencies:
                    -
                      name: 'ASM ''{#DG_NAME}'': Disk group usage is too high (over {$ORACLE.ASM.USED.PCT.MAX.HIGH}% for 5m)'
                      expression: 'min(/Oracle by ODBC/oracle.asm_used_pct["{#DG_NAME}"],5m)>{$ORACLE.ASM.USED.PCT.MAX.HIGH}'
          graph_prototypes:
            -
              uuid: 75f9f07dbae84443900aad10095e37f9
              name: 'ASM ''{#DG_NAME}'': ASM disk group ''{#DG_NAME}'''
              graph_items:
                -
                  color: 1A7C11
                  item:
                    host: 'Oracle by ODBC'
                    key: 'oracle.asm_free_size["{#DG_NAME}"]'
                -
                  sortorder: '1'
                  color: 2774A4
                  item:
                    host: 'Oracle by ODBC'
                    key: 'oracle.asm_total_size["{#DG_NAME}"]'
        -
          uuid: 0f65936b86314c269b7720a9ff3f1c14
          name: 'Database discovery'
          type: ODBC
          key: 'db.odbc.discovery[db_list,"{$ORACLE.DSN}"]'
          delay: 1h
          params: 'SELECT name as DBNAME, DECODE(CDB, ''YES'', ''CDB'', ''No-CDB'') AS TYPE  FROM V$DATABASE;'
          username: '{$ORACLE.USER}'
          password: '{$ORACLE.PASSWORD}'
          filter:
            evaltype: AND
            conditions:
              -
                macro: '{#DBNAME}'
                value: '{$ORACLE.DBNAME.MATCHES}'
                formulaid: A
              -
                macro: '{#DBNAME}'
                value: '{$ORACLE.DBNAME.NOT_MATCHES}'
                operator: NOT_MATCHES_REGEX
                formulaid: B
          description: 'Scanning databases in DBMS.'
          item_prototypes:
            -
              uuid: 075885bfd41d43aba7861ae49e9abbee
              name: 'Oracle Database ''{#DBNAME}'': Force logging'
              type: DEPENDENT
              key: 'oracle.db_force_logging["{#DBNAME}"]'
              delay: '0'
              history: 7d
              description: 'Indicates whether the database is under force logging mode (YES) or not (NO)'
              valuemap:
                name: 'Oracle force log status'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$[?(@.DBNAME==''{#DBNAME}'')].FORCE_LOGGING.first()'
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 15m
              master_item:
                key: 'db.odbc.get[get_cdb_info,"{$ORACLE.DSN}"]'
              tags:
                -
                  tag: Application
                  value: 'Oracle {#TYPE}'
            -
              uuid: 9b88e24d523e4111b2ff65ae26650e04
              name: 'Oracle Database ''{#DBNAME}'': Log mode'
              type: DEPENDENT
              key: 'oracle.db_log_mode["{#DBNAME}"]'
              delay: '0'
              history: 7d
              description: 'Archive log mode, 0 - ''NOARCHIVELOG'', 1 - ''ARCHIVELOG'', 2 - ''MANUAL'''
              valuemap:
                name: 'Oracle log mode'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$[?(@.DBNAME==''{#DBNAME}'')].LOG_MODE.first()'
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 15m
              master_item:
                key: 'db.odbc.get[get_cdb_info,"{$ORACLE.DSN}"]'
              tags:
                -
                  tag: Application
                  value: 'Oracle {#TYPE}'
            -
              uuid: f1971909355f4ef48c32695b5d204d56
              name: 'Oracle Database ''{#DBNAME}'': Open status'
              type: DEPENDENT
              key: 'oracle.db_open_mode["{#DBNAME}"]'
              delay: '0'
              history: 7d
              description: '1 - ''MOUNTED'', 2 - ''READ WRITE'', 3 - ''READ ONLY'', 4 - ''READ ONLY WITH APPLY'' (A physical standby database is open in real-time query mode)'
              valuemap:
                name: 'Oracle DB open status'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$[?(@.DBNAME==''{#DBNAME}'')].OPEN_MODE.first()'
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 15m
              master_item:
                key: 'db.odbc.get[get_cdb_info,"{$ORACLE.DSN}"]'
              tags:
                -
                  tag: Application
                  value: 'Oracle {#TYPE}'
              trigger_prototypes:
                -
                  uuid: 9bf80a9372ef4b3898fd5a4f0c3cec7c
                  expression: '(last(/Oracle by ODBC/oracle.db_open_mode["{#DBNAME}"],#1)<>last(/Oracle by ODBC/oracle.db_open_mode["{#DBNAME}"],#2))=1'
                  name: 'Oracle Database ''{#DBNAME}'': Open status has changed (new value received: {ITEM.VALUE})'
                  priority: INFO
                  description: |
                    Oracle DB open status has changed. Ack to close.
                    Last value: {ITEM.LASTVALUE1}.
                  manual_close: 'YES'
                  dependencies:
                    -
                      name: 'Oracle Database ''{#DBNAME}'': Open status in mount mode'
                      expression: 'last(/Oracle by ODBC/oracle.db_open_mode["{#DBNAME}"])=1'
                -
                  uuid: 3620ac4e75644789a2f0245dbb948771
                  expression: 'last(/Oracle by ODBC/oracle.db_open_mode["{#DBNAME}"])=1'
                  name: 'Oracle Database ''{#DBNAME}'': Open status in mount mode'
                  priority: WARNING
                  description: |
                    The Oracle DB has a MOUNTED state.
                    Last value: {ITEM.LASTVALUE1}.
            -
              uuid: 949d1e5fc4424b2bb0ffd220f00f6a79
              name: 'Oracle Database ''{#DBNAME}'': Role'
              type: DEPENDENT
              key: 'oracle.db_role["{#DBNAME}"]'
              delay: '0'
              history: 7d
              description: 'Current role of the database, 1 - ''SNAPSHOT STANDBY'', 2 - ''LOGICAL STANDBY'', 3 - ''PHYSICAL STANDBY'', 4 - ''PRIMARY '', 5 -''FAR SYNC'''
              valuemap:
                name: 'Oracle DB role'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$[?(@.DBNAME==''{#DBNAME}'')].ROLE.first()'
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 15m
              master_item:
                key: 'db.odbc.get[get_cdb_info,"{$ORACLE.DSN}"]'
              tags:
                -
                  tag: Application
                  value: 'Oracle {#TYPE}'
              trigger_prototypes:
                -
                  uuid: fb5ccc917a8344d7945b8867a1982d6b
                  expression: '(last(/Oracle by ODBC/oracle.db_role["{#DBNAME}"],#1)<>last(/Oracle by ODBC/oracle.db_role["{#DBNAME}"],#2))=1'
                  name: 'Oracle Database ''{#DBNAME}'': Role has changed (new value received: {ITEM.VALUE})'
                  priority: INFO
                  description: |
                    Oracle DB role has changed. Ack to close.
                    Last value: {ITEM.LASTVALUE1}.
                  manual_close: 'YES'
          trigger_prototypes:
            -
              uuid: 9c17e0fdd6fe409e8f298433e58b7445
              expression: 'last(/Oracle by ODBC/oracle.db_force_logging["{#DBNAME}"]) = 0 and last(/Oracle by ODBC/oracle.db_log_mode["{#DBNAME}"]) = 1'
              name: 'Oracle Database ''{#DBNAME}'': Force logging is deactivated for DB with active Archivelog'
              priority: WARNING
              description: |
                Force Logging mode  - it is very important metric for Databases in 'ARCHIVELOG'. This feature allows to forcibly write all transactions to the REDO.
                Last value: {ITEM.LASTVALUE1}.
        -
          uuid: 2611e69f735a42b190852589658dd591
          name: 'PDB discovery'
          type: ODBC
          key: 'db.odbc.discovery[pdb_list,"{$ORACLE.DSN}"]'
          delay: 1h
          params: 'SELECT name as DBNAME FROM V$PDBS;'
          username: '{$ORACLE.USER}'
          password: '{$ORACLE.PASSWORD}'
          filter:
            evaltype: AND
            conditions:
              -
                macro: '{#DBNAME}'
                value: '{$ORACLE.DBNAME.MATCHES}'
                formulaid: A
              -
                macro: '{#DBNAME}'
                value: '{$ORACLE.DBNAME.NOT_MATCHES}'
                operator: NOT_MATCHES_REGEX
                formulaid: B
          description: 'Scanning PDB in DBMS.'
          item_prototypes:
            -
              uuid: 975d302e3e9a4316b6d63256b88b5006
              name: 'Oracle Database ''{#DBNAME}'': Open status'
              type: DEPENDENT
              key: 'oracle.pdb_open_mode["{#DBNAME}"]'
              delay: '0'
              history: 7d
              description: '1 - ''MOUNTED'', 2 - ''READ WRITE'', 3 - ''READ ONLY'', 4 - ''READ ONLY WITH APPLY'' (A physical standby database is open in real-time query mode)'
              valuemap:
                name: 'Oracle DB open status'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$[?(@.DBNAME==''{#DBNAME}'')].OPEN_MODE.first()'
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 15m
              master_item:
                key: 'db.odbc.get[get_pdb_info,"{$ORACLE.DSN}"]'
              tags:
                -
                  tag: Application
                  value: 'Oracle PDB'
              trigger_prototypes:
                -
                  uuid: 3dbb9379f8024924b197037acfbbdac4
                  expression: '(last(/Oracle by ODBC/oracle.pdb_open_mode["{#DBNAME}"],#1)<>last(/Oracle by ODBC/oracle.pdb_open_mode["{#DBNAME}"],#2))=1'
                  name: 'Oracle Database ''{#DBNAME}'': Open status has changed (new value received: {ITEM.VALUE})'
                  priority: INFO
                  description: |
                    Oracle DB open status has changed. Ack to close.
                    Last value: {ITEM.LASTVALUE1}.
                  manual_close: 'YES'
                -
                  uuid: 5f8ed69b2c074a29b9975baf10a2a2f8
                  expression: 'last(/Oracle by ODBC/oracle.pdb_open_mode["{#DBNAME}"])=1'
                  name: 'Oracle Database ''{#DBNAME}'': Open status in mount mode'
                  priority: WARNING
                  description: |
                    The Oracle DB has a MOUNTED state.
                    Last value: {ITEM.LASTVALUE1}.
        -
          uuid: c8de553c98f64e59b40bf927f6447ad1
          name: 'Tablespace discovery'
          type: ODBC
          key: 'db.odbc.discovery[tbsname,"{$ORACLE.DSN}"]'
          delay: 1h
          params: |
            SELECT
            tablespace_name AS tablespace,
            contents  FROM DBA_TABLESPACES;
          username: '{$ORACLE.USER}'
          password: '{$ORACLE.PASSWORD}'
          filter:
            evaltype: AND
            conditions:
              -
                macro: '{#TABLESPACE}'
                value: '{$ORACLE.TABLESPACE.NAME.MATCHES}'
                formulaid: A
              -
                macro: '{#TABLESPACE}'
                value: '{$ORACLE.TABLESPACE.NAME.NOT_MATCHES}'
                operator: NOT_MATCHES_REGEX
                formulaid: B
          description: 'Scanning tablespaces in DBMS.'
          item_prototypes:
            -
              uuid: 46956fd7e5d8462798b85cd7b425a794
              name: 'Oracle TBS ''{#TABLESPACE}'': Tablespace allocated, bytes'
              type: DEPENDENT
              key: 'oracle.tbs_alloc_bytes["{#TABLESPACE}"]'
              delay: '0'
              history: 7d
              units: B
              description: 'Currently allocated bytes for tablespace (sum of the current size of datafiles).'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$[?(@.TABLESPACE==''{#TABLESPACE}'')].USED_BYTES.first()'
              master_item:
                key: 'db.odbc.get[tablespace_stats,"{$ORACLE.DSN}"]'
              tags:
                -
                  tag: Application
                  value: 'Oracle {#CONTENTS} Tablespaces. {#TABLESPACE}'
            -
              uuid: 8c3284a21872423499ee15fd7b0038f1
              name: 'Oracle TBS ''{#TABLESPACE}'': Tablespace free, bytes'
              type: DEPENDENT
              key: 'oracle.tbs_free_bytes["{#TABLESPACE}"]'
              delay: '0'
              history: 7d
              units: B
              description: 'Free bytes of allocated space.'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$[?(@.TABLESPACE==''{#TABLESPACE}'')].FREE_BYTES.first()'
              master_item:
                key: 'db.odbc.get[tablespace_stats,"{$ORACLE.DSN}"]'
              tags:
                -
                  tag: Application
                  value: 'Oracle {#CONTENTS} Tablespaces. {#TABLESPACE}'
            -
              uuid: afd8c1a01b64408fbc6f8f95fbb13593
              name: 'Oracle TBS ''{#TABLESPACE}'': Tablespace MAX size, bytes'
              type: DEPENDENT
              key: 'oracle.tbs_max_bytes["{#TABLESPACE}"]'
              delay: '0'
              history: 7d
              units: B
              description: 'Maximum size of tablespace.'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$[?(@.TABLESPACE==''{#TABLESPACE}'')].MAX_BYTES.first()'
              master_item:
                key: 'db.odbc.get[tablespace_stats,"{$ORACLE.DSN}"]'
              tags:
                -
                  tag: Application
                  value: 'Oracle {#CONTENTS} Tablespaces. {#TABLESPACE}'
            -
              uuid: 42c7812a75d5433ab8a275498635c81c
              name: 'Oracle TBS ''{#TABLESPACE}'': Open status'
              type: DEPENDENT
              key: 'oracle.tbs_status["{#TABLESPACE}"]'
              delay: '0'
              history: 7d
              description: 'Tablespace status. 1 - ''ONLINE'' 2 - ''OFFLINE'' 3- ''READ ONLY'''
              valuemap:
                name: 'Oracle tablespace status'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$[?(@.TABLESPACE==''{#TABLESPACE}'')].STATUS.first()'
              master_item:
                key: 'db.odbc.get[tablespace_stats,"{$ORACLE.DSN}"]'
              tags:
                -
                  tag: Application
                  value: 'Oracle {#CONTENTS} Tablespaces. {#TABLESPACE}'
              trigger_prototypes:
                -
                  uuid: 05c2af5a765842a1a70f2f67355db1b3
                  expression: '(last(/Oracle by ODBC/oracle.tbs_status["{#TABLESPACE}"],#1)<>last(/Oracle by ODBC/oracle.tbs_status["{#TABLESPACE}"],#2))=1'
                  name: 'Oracle TBS ''{#TABLESPACE}'': Tablespace status has changed (new value received: {ITEM.VALUE})'
                  priority: INFO
                  description: |
                    Oracle tablespace status has changed. Ack to close.
                    Last value: {ITEM.LASTVALUE1}.
                  manual_close: 'YES'
                  dependencies:
                    -
                      name: 'Oracle TBS ''{#TABLESPACE}'': Tablespase is OFFLINE'
                      expression: 'last(/Oracle by ODBC/oracle.tbs_status["{#TABLESPACE}"])=2'
                -
                  uuid: 3c5f54f41f95440aa18ca5316aeb50f6
                  expression: 'last(/Oracle by ODBC/oracle.tbs_status["{#TABLESPACE}"])=2'
                  name: 'Oracle TBS ''{#TABLESPACE}'': Tablespase is OFFLINE'
                  priority: WARNING
                  description: |
                    The tablespase is in the offline state.
                    Last value: {ITEM.LASTVALUE1}.
            -
              uuid: c3a904455ff244e1a30bf32f0b4ea0d7
              name: 'Oracle TBS ''{#TABLESPACE}'': Tablespace usage percent'
              type: DEPENDENT
              key: 'oracle.tbs_used_pct["{#TABLESPACE}"]'
              delay: '0'
              history: 7d
              value_type: FLOAT
              units: '%'
              description: 'Allocated bytes/Max bytes*100'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$[?(@.TABLESPACE==''{#TABLESPACE}'')].USED_PCT.first()'
              master_item:
                key: 'db.odbc.get[tablespace_stats,"{$ORACLE.DSN}"]'
              tags:
                -
                  tag: Application
                  value: 'Oracle {#CONTENTS} Tablespaces. {#TABLESPACE}'
              trigger_prototypes:
                -
                  uuid: c652d2796fff436f868e7eec1786f703
                  expression: 'min(/Oracle by ODBC/oracle.tbs_used_pct["{#TABLESPACE}"],5m)>{$ORACLE.TBS.USED.PCT.MAX.HIGH}'
                  name: 'Oracle TBS ''{#TABLESPACE}'': Tablespace Usage is too high (over {$ORACLE.TBS.USED.PCT.MAX.HIGH}% for 5m).'
                  priority: HIGH
                  description: 'Last value: {ITEM.LASTVALUE1}.'
                -
                  uuid: 09cbedc8d319447288938728c939531c
                  expression: 'min(/Oracle by ODBC/oracle.tbs_used_pct["{#TABLESPACE}"],5m)>{$ORACLE.TBS.USED.PCT.MAX.WARN}'
                  name: 'Oracle TBS ''{#TABLESPACE}'': Tablespace usage is too high (over {$ORACLE.TBS.USED.PCT.MAX.WARN}% for 5m).'
                  priority: WARNING
                  description: 'Last value: {ITEM.LASTVALUE1}.'
                  dependencies:
                    -
                      name: 'Oracle TBS ''{#TABLESPACE}'': Tablespace Usage is too high (over {$ORACLE.TBS.USED.PCT.MAX.HIGH}% for 5m).'
                      expression: 'min(/Oracle by ODBC/oracle.tbs_used_pct["{#TABLESPACE}"],5m)>{$ORACLE.TBS.USED.PCT.MAX.HIGH}'
          graph_prototypes:
            -
              uuid: a9f3bc52aa0340feb35600ad249e82d3
              name: 'Oracle TBS ''{#TABLESPACE}'': Tablespace ''{#TABLESPACE}'''
              graph_items:
                -
                  color: 1A7C11
                  item:
                    host: 'Oracle by ODBC'
                    key: 'oracle.tbs_alloc_bytes["{#TABLESPACE}"]'
                -
                  sortorder: '1'
                  color: 2774A4
                  item:
                    host: 'Oracle by ODBC'
                    key: 'oracle.tbs_max_bytes["{#TABLESPACE}"]'
      macros:
        -
          macro: '{$ORACLE.ASM.USED.PCT.MAX.HIGH}'
          value: '95'
          description: 'Maximum percentage of used ASM disk group for high trigger expression.'
        -
          macro: '{$ORACLE.ASM.USED.PCT.MAX.WARN}'
          value: '90'
          description: 'Maximum percentage of used ASM disk group for warning trigger expression.'
        -
          macro: '{$ORACLE.CONCURRENCY.MAX.WARN}'
          value: '80'
          description: 'Maximum percentage of sessions concurrency usage for trigger expression.'
        -
          macro: '{$ORACLE.DB.FILE.MAX.WARN}'
          value: '80'
          description: 'Maximum percentage of database files for trigger expression.'
        -
          macro: '{$ORACLE.DBNAME.MATCHES}'
          value: '.*'
          description: 'This macro is used in database discovery. It can be overridden on a host or linked template level.'
        -
          macro: '{$ORACLE.DBNAME.NOT_MATCHES}'
          value: PDB\$SEED
          description: 'This macro is used in database discovery. It can be overridden on a host or linked template level.'
        -
          macro: '{$ORACLE.DSN}'
          value: '<Put your DSN here>'
          description: 'System data source name'
        -
          macro: '{$ORACLE.EXPIRE.PASSWORD.MIN.WARN}'
          value: '7'
          description: 'Number of days of warning before password expires (for trigger expression).'
        -
          macro: '{$ORACLE.PASSWORD}'
          value: '<Put your password here>'
          description: 'Oracle user password.'
        -
          macro: '{$ORACLE.PGA.USE.MAX.WARN}'
          value: '90'
          description: 'Maximum percentage of PGA usage alert treshold (for trigger expression).'
        -
          macro: '{$ORACLE.PORT}'
          value: '1521'
          description: 'Oracle DB TCP port.'
        -
          macro: '{$ORACLE.PROCESSES.MAX.WARN}'
          value: '80'
          description: 'Maximum percentage of active processes alert treshold (for trigger expression).'
        -
          macro: '{$ORACLE.REDO.MIN.WARN}'
          value: '3'
          description: 'Minimum number of REDO logs alert treshold (for trigger expression).'
        -
          macro: '{$ORACLE.SESSION.LOCK.MAX.TIME}'
          value: '600'
          description: 'Maximum session lock duration in seconds for count the session as a prolongely locked query.'
        -
          macro: '{$ORACLE.SESSION.LONG.LOCK.MAX.WARN}'
          value: '3'
          description: 'Maximum number of the prolongely locked sessions alert treshold (for trigger expression).'
        -
          macro: '{$ORACLE.SESSIONS.LOCK.MAX.WARN}'
          value: '20'
          description: 'Maximum percentage of locked sessions alert treshold (for trigger expression).'
        -
          macro: '{$ORACLE.SESSIONS.MAX.WARN}'
          value: '80'
          description: 'Maximum percentage of active sessions alert treshold (for trigger expression).'
        -
          macro: '{$ORACLE.SHARED.FREE.MIN.WARN}'
          value: '5'
          description: 'Minimum percentage of free shared pool alert treshold (for trigger expression).'
        -
          macro: '{$ORACLE.TABLESPACE.NAME.MATCHES}'
          value: '.*'
          description: 'This macro is used in tablespace discovery. It can be overridden on a host or linked template level.'
        -
          macro: '{$ORACLE.TABLESPACE.NAME.NOT_MATCHES}'
          value: CHANGE_IF_NEEDED
          description: 'This macro is used in tablespace discovery. It can be overridden on a host or linked template level.'
        -
          macro: '{$ORACLE.TBS.USED.PCT.MAX.HIGH}'
          value: '90'
          description: 'Maximum percentage of used tablespace high severity alert treshold (for trigger expression).'
        -
          macro: '{$ORACLE.TBS.USED.PCT.MAX.WARN}'
          value: '80'
          description: 'Maximum percentage of used tablespace warning severity alert treshold (for trigger expression).'
        -
          macro: '{$ORACLE.USER}'
          value: '<Put your username here>'
          description: 'Oracle username.'
      valuemaps:
        -
          uuid: 79af6c068ba141ba9806f4341edd9266
          name: 'Oracle Archivelog status'
          mappings:
            -
              value: '0'
              newvalue: Unknown
            -
              value: '1'
              newvalue: Error
            -
              value: '2'
              newvalue: Deferred
            -
              value: '3'
              newvalue: Valid
        -
          uuid: 3afaab75342c4be186fb4f595ed62a31
          name: 'Oracle archiver state'
          mappings:
            -
              value: '0'
              newvalue: Unknown
            -
              value: '1'
              newvalue: Stopped
            -
              value: '2'
              newvalue: Started
            -
              value: '3'
              newvalue: Failed
        -
          uuid: d0912db18fe54941b9345ebf869fd1a6
          name: 'Oracle DB open status'
          mappings:
            -
              value: '0'
              newvalue: Unknown
            -
              value: '1'
              newvalue: Mounted
            -
              value: '2'
              newvalue: 'Read Only'
            -
              value: '3'
              newvalue: Read-Write
            -
              value: '4'
              newvalue: 'Read Only with Apply'
        -
          uuid: df05d594141f42ebb294cf6adca5fd6b
          name: 'Oracle DB role'
          mappings:
            -
              value: '0'
              newvalue: Unknown
            -
              value: '1'
              newvalue: 'Snapshot standby'
            -
              value: '2'
              newvalue: 'Logical standby'
            -
              value: '3'
              newvalue: 'Physical standby'
            -
              value: '4'
              newvalue: Primary
            -
              value: '5'
              newvalue: 'Far sync'
        -
          uuid: f00ca5c45ab84df788820af2642e4784
          name: 'Oracle force log status'
          mappings:
            -
              value: '0'
              newvalue: 'No'
            -
              value: '1'
              newvalue: 'Yes'
        -
          uuid: 97b689d7ddc04bcd9b9f92af6ba783bd
          name: 'Oracle instance role'
          mappings:
            -
              value: '0'
              newvalue: Unknown
            -
              value: '1'
              newvalue: Primary
            -
              value: '2'
              newvalue: Secondary
        -
          uuid: 41e105c52bf045899c3c4a1cb4e16865
          name: 'Oracle instance status'
          mappings:
            -
              value: '0'
              newvalue: Unknown
            -
              value: '1'
              newvalue: Started
            -
              value: '2'
              newvalue: Mounted
            -
              value: '3'
              newvalue: Open
            -
              value: '4'
              newvalue: 'Open migrate'
        -
          uuid: 809554f521d645ea8e8850c3b1f41579
          name: 'Oracle log mode'
          mappings:
            -
              value: '0'
              newvalue: NOARCHIVELOG
            -
              value: '1'
              newvalue: ARCHIVELOG
            -
              value: '2'
              newvalue: MANUAL
        -
          uuid: c6633e4ef9a84fa7b843529479a06158
          name: 'Oracle tablespace status'
          mappings:
            -
              value: '0'
              newvalue: Unknown
            -
              value: '1'
              newvalue: Online
            -
              value: '2'
              newvalue: Offline
            -
              value: '3'
              newvalue: Read-Only
        -
          uuid: 45ad479873b84113a98fa21b21081c65
          name: 'Service state'
          mappings:
            -
              value: '0'
              newvalue: Down
            -
              value: '1'
              newvalue: Up
  triggers:
    -
      uuid: 7b0bde98c6c54e67b0aa8b3339fe464d
      expression: 'max(/Oracle by ODBC/net.tcp.service[tcp,{HOST.CONN},{$ORACLE.PORT}],#3)=0  and max(/Oracle by ODBC/proc.num[,,,"tnslsnr LISTENER"],#3)>0'
      name: 'Oracle: Port {$ORACLE.PORT} is unavailable'
      priority: DISASTER
      description: |
        The TCP port of the Oracle Server service is currently unavailable.
        Last value: {ITEM.LASTVALUE1}.
    -
      uuid: 38471058988c46f4b81af9f77637914a
      expression: 'min(/Oracle by ODBC/oracle.processes_count,5m) * 100 / last(/Oracle by ODBC/oracle.processes_limit) > {$ORACLE.PROCESSES.MAX.WARN}'
      name: 'Oracle: Too many active processes (over {$ORACLE.PROCESSES.MAX.WARN}% for 5 min)'
      priority: WARNING
      description: |
        Active processes are using more than {$ORACLE.PROCESSES.MAX.WARN}% of the available number of processes.
        Last value: {ITEM.LASTVALUE1}.
    -
      uuid: 4a055da31f09489ea0f03e4582ee4333
      expression: 'min(/Oracle by ODBC/oracle.session_count,5m) * 100 / last(/Oracle by ODBC/oracle.session_limit) > {$ORACLE.SESSIONS.MAX.WARN}'
      name: 'Oracle: Too many active sessions (over {$ORACLE.SESSIONS.MAX.WARN}% for 5 min)'
      priority: WARNING
      description: |
        Active sessions are using more than {$ORACLE.SESSIONS.MAX.WARN}% of the available sessions.
        Last value: {ITEM.LASTVALUE1}.
    -
      uuid: 5752d92063f84aaa818bc85b135cd4fd
      expression: 'min(/Oracle by ODBC/oracle.db_files_count,5m) * 100 / last(/Oracle by ODBC/oracle.db_files_limit) > {$ORACLE.DB.FILE.MAX.WARN}'
      name: 'Oracle: Too many database files (over {$ORACLE.DB.FILE.MAX.WARN}% for 5 min)'
      priority: WARNING
      description: |
        Number of datafiles is higher than {$ORACLE.DB.FILE.MAX.WARN}% of the available datafile files limit.
        Last value: {ITEM.LASTVALUE1}.
    -
      uuid: 476001f0f52a45f59942d73c643371c1
      expression: 'min(/Oracle by ODBC/oracle.total_pga_used,5m) * 100 / last(/Oracle by ODBC/oracle.pga_target) > {$ORACLE.PGA.USE.MAX.WARN}'
      name: 'Oracle: Total PGA inuse is too high (over {$ORACLE.PGA.USE.MAX.WARN}% for 5 min)'
      priority: WARNING
      description: |
        Total PGA in use is more than {$ORACLE.PGA.USE.MAX.WARN}% of PGA_AGGREGATE_TARGET.
        Last value: {ITEM.LASTVALUE1}.
  graphs:
    -
      uuid: 72ad9e81bb5147e6827499143d256068
      name: 'Oracle: Datafiles'
      graph_items:
        -
          color: 1A7C11
          item:
            host: 'Oracle by ODBC'
            key: oracle.db_files_count
        -
          sortorder: '1'
          color: 2774A4
          item:
            host: 'Oracle by ODBC'
            key: oracle.db_files_limit
    -
      uuid: dba3f3b856114d50b826a15cacd1d896
      name: 'Oracle: PGA'
      graph_items:
        -
          color: 1A7C11
          item:
            host: 'Oracle by ODBC'
            key: oracle.total_pga_used
        -
          sortorder: '1'
          color: 2774A4
          item:
            host: 'Oracle by ODBC'
            key: oracle.pga_target
        -
          sortorder: '2'
          color: F63100
          item:
            host: 'Oracle by ODBC'
            key: oracle.total_pga_allocated
    -
      uuid: 3d1c6ffe69f34695b30d132d99d41dbb
      name: 'Oracle: Physical Read\Write Rate'
      graph_items:
        -
          color: 1A7C11
          item:
            host: 'Oracle by ODBC'
            key: oracle.physical_writes_rate
        -
          sortorder: '1'
          color: 2774A4
          item:
            host: 'Oracle by ODBC'
            key: oracle.physical_reads_rate
    -
      uuid: 5002e9a128524991b16dbea89e0f4b07
      name: 'Oracle: Physical Read\Write Rate, Bytes'
      graph_items:
        -
          color: 1A7C11
          item:
            host: 'Oracle by ODBC'
            key: oracle.physical_write_bytes_rate
        -
          sortorder: '1'
          color: 2774A4
          item:
            host: 'Oracle by ODBC'
            key: oracle.physical_read_bytes_rate
    -
      uuid: 044e0b3a485547b7b41939a78be80784
      name: 'Oracle: Processes'
      graph_items:
        -
          color: 1A7C11
          item:
            host: 'Oracle by ODBC'
            key: oracle.processes_count
        -
          sortorder: '1'
          color: 2774A4
          item:
            host: 'Oracle by ODBC'
            key: oracle.processes_limit
    -
      uuid: eef29b959d334e4b9ba3a4d83a571f1f
      name: 'Oracle: Sessions'
      graph_items:
        -
          color: 1A7C11
          item:
            host: 'Oracle by ODBC'
            key: oracle.session_count
        -
          sortorder: '1'
          color: 2774A4
          item:
            host: 'Oracle by ODBC'
            key: oracle.session_active_background
        -
          sortorder: '2'
          color: F63100
          item:
            host: 'Oracle by ODBC'
            key: oracle.session_inactive_user
        -
          sortorder: '3'
          color: A54F10
          item:
            host: 'Oracle by ODBC'
            key: oracle.session_active_user
        -
          sortorder: '4'
          color: FC6EA3
          item:
            host: 'Oracle by ODBC'
            key: oracle.session_limit
    -
      uuid: dd6a3c604ba446e793526564527c5c2f
      name: 'Oracle: SGA Memory Usage'
      type: STACKED
      graph_items:
        -
          color: 1A7C11
          item:
            host: 'Oracle by ODBC'
            key: oracle.sga_java_pool
        -
          sortorder: '1'
          color: 2774A4
          item:
            host: 'Oracle by ODBC'
            key: oracle.sga_large_pool
        -
          sortorder: '2'
          color: F63100
          item:
            host: 'Oracle by ODBC'
            key: oracle.sga_shared_pool
        -
          sortorder: '3'
          color: A54F10
          item:
            host: 'Oracle by ODBC'
            key: oracle.sga_log_buffer
        -
          sortorder: '4'
          color: FC6EA3
          item:
            host: 'Oracle by ODBC'
            key: oracle.sga_fixed
        -
          sortorder: '5'
          color: 6C59DC
          item:
            host: 'Oracle by ODBC'
            key: oracle.sga_buffer_cache
