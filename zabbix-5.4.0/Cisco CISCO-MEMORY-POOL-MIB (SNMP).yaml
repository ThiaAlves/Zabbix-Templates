zabbix_export:
  version: '5.4'
  date: '2021-05-28T01:01:31Z'
  groups:
    -
      uuid: 57b7ae836ca64446ba2c296389c009b7
      name: Templates/Modules
  templates:
    -
      uuid: d7c122cde75447248d4b1613cdc25d5b
      template: 'Cisco CISCO-MEMORY-POOL-MIB SNMP'
      name: 'Cisco CISCO-MEMORY-POOL-MIB SNMP'
      description: |
        Template Cisco CISCO-MEMORY-POOL-MIB
        
        MIBs used:
        CISCO-MEMORY-POOL-MIB
        
        Template tooling version used: 0.38
      groups:
        -
          name: Templates/Modules
      discovery_rules:
        -
          uuid: d84cfe9db46d49c8971317f7e09d9537
          name: 'Memory Discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},1.3.6.1.4.1.9.9.48.1.1.1.2]'
          key: memory.discovery
          delay: 1h
          description: |
            Discovery of ciscoMemoryPoolTable, a table of memory pool monitoring entries.
            http://www.cisco.com/c/en/us/support/docs/ip/simple-network-management-protocol-snmp/15216-contiguous-memory.html
          item_prototypes:
            -
              uuid: a88a818dfdf743408698d7a45bc29edc
              name: '{#SNMPVALUE}: Free memory'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.9.9.48.1.1.1.6.{#SNMPINDEX}'
              key: 'vm.memory.free[ciscoMemoryPoolFree.{#SNMPINDEX}]'
              history: 7d
              units: B
              description: |
                MIB: CISCO-MEMORY-POOL-MIB
                Indicates the number of bytes from the memory pool that are currently unused on the managed device. Note that the sum of ciscoMemoryPoolUsed and ciscoMemoryPoolFree is the total amount of memory in the pool
                Reference: http://www.cisco.com/c/en/us/support/docs/ip/simple-network-management-protocol-snmp/15216-contiguous-memory.html
              tags:
                -
                  tag: Application
                  value: Memory
            -
              uuid: 32d6bbb06c624f9e9a236fb53507948c
              name: '{#SNMPVALUE}: Used memory'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.9.9.48.1.1.1.5.{#SNMPINDEX}'
              key: 'vm.memory.used[ciscoMemoryPoolUsed.{#SNMPINDEX}]'
              history: 7d
              units: B
              description: |
                MIB: CISCO-MEMORY-POOL-MIB
                Indicates the number of bytes from the memory pool that are currently in use by applications on the managed device.
                Reference: http://www.cisco.com/c/en/us/support/docs/ip/simple-network-management-protocol-snmp/15216-contiguous-memory.html
              tags:
                -
                  tag: Application
                  value: Memory
            -
              uuid: 5065203cb8244befadc54cdb004d4b40
              name: '{#SNMPVALUE}: Memory utilization'
              type: CALCULATED
              key: 'vm.memory.util[vm.memory.util.{#SNMPINDEX}]'
              history: 7d
              value_type: FLOAT
              units: '%'
              params: 'last(//vm.memory.used[ciscoMemoryPoolUsed.{#SNMPINDEX}])/(last(//vm.memory.free[ciscoMemoryPoolFree.{#SNMPINDEX}])+last(//vm.memory.used[ciscoMemoryPoolUsed.{#SNMPINDEX}]))*100'
              description: 'Memory utilization in %'
              tags:
                -
                  tag: Application
                  value: Memory
              trigger_prototypes:
                -
                  uuid: 71616fb5eb1749ea8543ce8edd263bd3
                  expression: 'min(/Cisco CISCO-MEMORY-POOL-MIB SNMP/vm.memory.util[vm.memory.util.{#SNMPINDEX}],5m)>{$MEMORY.UTIL.MAX}'
                  name: '{#SNMPVALUE}: High memory utilization ( >{$MEMORY.UTIL.MAX}% for 5m)'
                  priority: AVERAGE
                  description: |
                    The system is running out of free memory.
                    Last value: {ITEM.LASTVALUE1}.
          graph_prototypes:
            -
              uuid: 754f4378d0fb43c288e891285efee8a5
              name: '{#SNMPVALUE}: Memory utilization'
              ymin_type_1: FIXED
              ymax_type_1: FIXED
              graph_items:
                -
                  drawtype: GRADIENT_LINE
                  color: 1A7C11
                  item:
                    host: 'Cisco CISCO-MEMORY-POOL-MIB SNMP'
                    key: 'vm.memory.util[vm.memory.util.{#SNMPINDEX}]'
      macros:
        -
          macro: '{$MEMORY.UTIL.MAX}'
          value: '90'
